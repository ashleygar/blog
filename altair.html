<!DOCTYPE html>
<html lang="en">
<head>
 <title>Altair for IMO Performance</title>
 <!-- Latest compiled and minified CSS -->
 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
 <div class="container">
  <h1><a href=".">Ashley's Data Blog</a></h1>
 </div>
</head>
<body>
 <div class="container">
<div class="row">
 <div class="col-md-8">
  <h3>Altair for IMO Performance</h3>
  <label>2020-01-05</label>
  <p>This blog will highlight a few line graphs that can be made using Altair - a library of vizualization tools for Python.</p>
<p>Information regarding all aspects of Altair charts (types, customization, etc.) can be found here: https://altair-viz.github.io/index.html</p>
<p>The data set chosen for this blog is the International Math Olympiad (IMO) data found on the Kaggle website (source: https://www.kaggle.com/luckyt/imo-scores/data). The IMO is a yearly math competition for high school students.  Each country participating can send a maximum of 6 students.  The competition entails solving 6 math problems in 2 days, with three problems in each day and the 3rd and 6th question typically being the most challenging.</p>
<p>Various elements of the data can be plotted, but this blog will focus on country ranking over time. The ranking of the country is determined by the sum of individual participants' scores from each country in a given year. The maximum students that can participate per country is 6 and the maximum score per question is 7.  Therefore, the maximum score per student is 42 (6 questions x 7 maximum score).  If a country has 6 participants, the maximum possible country score would be 252 (42 max score per student x 6 students), which would be achieved if all 6 students scored a perfect score.</p>
<p>More infomation about the IMO rules are provided here:
https://www.imo-official.org/documents/RegulationsIMO.pdf</p>
<p>More infromation about the competition can be found on its general website:
https://www.imo-official.org/</p>
<div class="highlight"><pre><span></span><span class="c1"># Import data.</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">altair</span> <span class="kn">as</span> <span class="nn">alt</span>
<span class="kn">import</span> <span class="nn">IPython</span>
<span class="kn">import</span> <span class="nn">vega</span>

<span class="c1"># Increase max rows since data set has ~15k rows.</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">15000</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># Import data</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;imo_results.csv&#39;</span><span class="p">)</span>

<span class="c1"># Explore data head and tail.</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>firstname</th>
      <th>lastname</th>
      <th>problem1</th>
      <th>problem2</th>
      <th>problem3</th>
      <th>problem4</th>
      <th>problem5</th>
      <th>problem6</th>
      <th>total</th>
      <th>rank</th>
      <th>award</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1984</td>
      <td>BGR</td>
      <td>Diko B.</td>
      <td>Mihov</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>42</td>
      <td>1</td>
      <td>Gold medal</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1984</td>
      <td>GDR</td>
      <td>Karin</td>
      <td>Gröger</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>42</td>
      <td>1</td>
      <td>Gold medal</td>
    </tr>
    <tr>
      <td>2</td>
      <td>1984</td>
      <td>ROU</td>
      <td>Daniel</td>
      <td>Tătaru</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>42</td>
      <td>1</td>
      <td>Gold medal</td>
    </tr>
    <tr>
      <td>3</td>
      <td>1984</td>
      <td>USS</td>
      <td>Andrey</td>
      <td>Astrelin</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>42</td>
      <td>1</td>
      <td>Gold medal</td>
    </tr>
    <tr>
      <td>4</td>
      <td>1984</td>
      <td>USS</td>
      <td>Konstantin</td>
      <td>Ignatiev</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>7.0</td>
      <td>42</td>
      <td>1</td>
      <td>Gold medal</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>firstname</th>
      <th>lastname</th>
      <th>problem1</th>
      <th>problem2</th>
      <th>problem3</th>
      <th>problem4</th>
      <th>problem5</th>
      <th>problem6</th>
      <th>total</th>
      <th>rank</th>
      <th>award</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>14830</td>
      <td>2017</td>
      <td>KEN</td>
      <td>Beracah May</td>
      <td>Nyang'Or</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>604</td>
      <td>NaN</td>
    </tr>
    <tr>
      <td>14831</td>
      <td>2017</td>
      <td>MMR</td>
      <td>Wai Yan Moe</td>
      <td>Lwin</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>604</td>
      <td>NaN</td>
    </tr>
    <tr>
      <td>14832</td>
      <td>2017</td>
      <td>NPL</td>
      <td>Awanish</td>
      <td>Khanal</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>604</td>
      <td>NaN</td>
    </tr>
    <tr>
      <td>14833</td>
      <td>2017</td>
      <td>NPL</td>
      <td>Bivek</td>
      <td>Panthi</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>604</td>
      <td>NaN</td>
    </tr>
    <tr>
      <td>14834</td>
      <td>2017</td>
      <td>NPL</td>
      <td>Prashanna</td>
      <td>Shrestha</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>604</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># Ensure data are the correct type and complete.</span>

<span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="k">class</span> <span class="s1">&#39;pandas.core.frame.DataFrame&#39;</span><span class="o">&gt;</span>
<span class="n">RangeIndex</span><span class="p">:</span> <span class="mi">14835</span> <span class="n">entries</span><span class="p">,</span> <span class="mi">0</span> <span class="k">to</span> <span class="mi">14834</span>
<span class="k">Data</span> <span class="n">columns</span> <span class="p">(</span><span class="n">total</span> <span class="mi">13</span> <span class="n">columns</span><span class="p">):</span>
<span class="k">year</span>         <span class="mi">14835</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="n">int64</span>
<span class="n">country</span>      <span class="mi">14835</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="k">object</span>
<span class="n">firstname</span>    <span class="mi">14817</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="k">object</span>
<span class="n">lastname</span>     <span class="mi">14817</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="k">object</span>
<span class="n">problem1</span>     <span class="mi">14834</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="n">float64</span>
<span class="n">problem2</span>     <span class="mi">14834</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="n">float64</span>
<span class="n">problem3</span>     <span class="mi">14834</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="n">float64</span>
<span class="n">problem4</span>     <span class="mi">14834</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="n">float64</span>
<span class="n">problem5</span>     <span class="mi">14834</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="n">float64</span>
<span class="n">problem6</span>     <span class="mi">14834</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="n">float64</span>
<span class="n">total</span>        <span class="mi">14835</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="n">int64</span>
<span class="n">rank</span>         <span class="mi">14835</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="n">int64</span>
<span class="n">award</span>        <span class="mi">10062</span> <span class="n">non</span><span class="o">-</span><span class="k">null</span> <span class="k">object</span>
<span class="n">dtypes</span><span class="p">:</span> <span class="n">float64</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="n">int64</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="k">object</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">memory</span> <span class="k">usage</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">5</span><span class="o">+</span> <span class="n">MB</span>
</pre></div>


<p>Only the year, country, and total are relevant for the charts that will be presented in this blog, so the missing names and problem values are not relevant and can be ignored.</p>
<div class="highlight"><pre><span></span><span class="c1"># Ensure min and max values are accurate.</span>

<span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>year</td>
      <td>14835.0</td>
      <td>2003.079744</td>
      <td>9.201542</td>
      <td>1984.0</td>
      <td>1996.0</td>
      <td>2004.0</td>
      <td>2011.0</td>
      <td>2017.0</td>
    </tr>
    <tr>
      <td>problem1</td>
      <td>14834.0</td>
      <td>4.185520</td>
      <td>2.940125</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>7.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <td>problem2</td>
      <td>14834.0</td>
      <td>2.680396</td>
      <td>2.885086</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>7.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <td>problem3</td>
      <td>14834.0</td>
      <td>1.120804</td>
      <td>2.088346</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <td>problem4</td>
      <td>14834.0</td>
      <td>3.989416</td>
      <td>2.939964</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>7.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <td>problem5</td>
      <td>14834.0</td>
      <td>2.262977</td>
      <td>2.759454</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <td>problem6</td>
      <td>14834.0</td>
      <td>0.888162</td>
      <td>1.929441</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <td>total</td>
      <td>14835.0</td>
      <td>15.128345</td>
      <td>10.150644</td>
      <td>0.0</td>
      <td>7.0</td>
      <td>14.0</td>
      <td>22.0</td>
      <td>42.0</td>
    </tr>
    <tr>
      <td>rank</td>
      <td>14835.0</td>
      <td>226.753960</td>
      <td>145.798378</td>
      <td>1.0</td>
      <td>104.0</td>
      <td>210.0</td>
      <td>340.0</td>
      <td>604.0</td>
    </tr>
  </tbody>
</table>
</div>

<p>All values are in a valid range.  There do not appear to be any errors in the data presented.</p>
<p>The section below prepares a filtered dataset (country_rank) that will feed other filered data sets for the charts below.</p>
<p>The data are aggregated in two ways, which will be displayed in the charts below:</p>
<p>v1. Top 5 or top 10 countries that were most frequently in the top 10 team score ranking from 1984 to 2017.
v2. Top 5 or top 10 countries with the highest total team score in 2017.</p>
<p>Each data version will be presented in four styles of charts:</p>
<ol>
<li>Multi-Series Line chart:  For v1 data (top 5) and v2 data (top 5) in Chart 1 and 2.</li>
<li>Multi Series Line Chart - with Multi-Line Highlight: For v1 data (top 5) and v2 data (top 5) in Chart 3 and 4.</li>
<li>Multi Series Line Chart - adjusting axis with clamp (interactive): For v1 data (top 10) and v2 data (top 10) in Chart 5 and 6.</li>
<li>Multi Series Line Chart - with Multi-Line Tooltip (interactive): For v1 data (top 5) and v2 data (top 5) in Chart 7 and 8.</li>
</ol>
<div class="highlight"><pre><span></span><span class="c1"># Data preparation</span>

<span class="c1"># Aggregate total country scores by year.</span>

<span class="n">country_rank</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;country&#39;</span><span class="p">])[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">country_rank</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">country_rank</span><span class="p">)</span>
<span class="n">country_rank</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1984</td>
      <td>ALG</td>
      <td>36</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1984</td>
      <td>AUS</td>
      <td>103</td>
    </tr>
    <tr>
      <td>2</td>
      <td>1984</td>
      <td>AUT</td>
      <td>97</td>
    </tr>
    <tr>
      <td>3</td>
      <td>1984</td>
      <td>BEL</td>
      <td>56</td>
    </tr>
    <tr>
      <td>4</td>
      <td>1984</td>
      <td>BGR</td>
      <td>203</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># Select top 10 countries from each year with the highest team ranking. Will later use this data for all steps below.</span>

<span class="n">country_rank</span> <span class="o">=</span> <span class="n">country_rank</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="n">country_rank</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">country_rank</span><span class="p">)</span>
<span class="n">country_rank</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>total</th>
    </tr>
    <tr>
      <th>year</th>
      <th>year</th>
      <th>country</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan="5" valign="top">1984</td>
      <td rowspan="5" valign="top">1984</td>
      <td>USS</td>
      <td>235</td>
    </tr>
    <tr>
      <td>BGR</td>
      <td>203</td>
    </tr>
    <tr>
      <td>ROU</td>
      <td>199</td>
    </tr>
    <tr>
      <td>HUN</td>
      <td>195</td>
    </tr>
    <tr>
      <td>USA</td>
      <td>195</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># v1 Data Preparation - Top 5 countries that most frequently placed in top 10.</span>

<span class="c1"># From country_rank, select top 5 countries.</span>

<span class="n">country_list5</span> <span class="o">=</span> <span class="n">country_rank</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;total&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">country_list5</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
    </tr>
    <tr>
      <th>country</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>USA</td>
      <td>33</td>
    </tr>
    <tr>
      <td>CHN</td>
      <td>31</td>
    </tr>
    <tr>
      <td>RUS</td>
      <td>25</td>
    </tr>
    <tr>
      <td>VNM</td>
      <td>24</td>
    </tr>
    <tr>
      <td>ROU</td>
      <td>21</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># Get list of countries that will be filtered.</span>

<span class="n">country_list5</span><span class="o">.</span><span class="n">index</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="k">Index</span><span class="p">([</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;CHN&#39;</span><span class="p">,</span> <span class="s1">&#39;RUS&#39;</span><span class="p">,</span> <span class="s1">&#39;VNM&#39;</span><span class="p">,</span> <span class="s1">&#39;ROU&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;country&#39;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># Use top 5 list to filter countries from chart.</span>

<span class="n">country_chart_top5</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;CHN&#39;</span><span class="p">,</span> <span class="s1">&#39;RUS&#39;</span><span class="p">,</span> <span class="s1">&#39;VNM&#39;</span><span class="p">,</span> <span class="s1">&#39;ROU&#39;</span><span class="p">])]</span>
<span class="n">country_chart5</span> <span class="o">=</span> <span class="n">country_chart_top5</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;country&#39;</span><span class="p">])[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">country_chart5</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">country_chart5</span><span class="p">)</span>
<span class="n">country_chart5</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>total</th>
    </tr>
    <tr>
      <th>year</th>
      <th>country</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan="3" valign="top">1984</td>
      <td>ROU</td>
      <td>199</td>
    </tr>
    <tr>
      <td>USA</td>
      <td>195</td>
    </tr>
    <tr>
      <td>VNM</td>
      <td>162</td>
    </tr>
    <tr>
      <td rowspan="2" valign="top">1985</td>
      <td>CHN</td>
      <td>26</td>
    </tr>
    <tr>
      <td>ROU</td>
      <td>201</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># An error with the index arose as it became multi-index.</span>

<span class="n">country_chart5</span><span class="o">.</span><span class="n">index</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">MultiIndex</span><span class="p">([(</span><span class="mi">1984</span><span class="p">,</span> <span class="s1">&#39;ROU&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1984</span><span class="p">,</span> <span class="s1">&#39;USA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1984</span><span class="p">,</span> <span class="s1">&#39;VNM&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1985</span><span class="p">,</span> <span class="s1">&#39;CHN&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1985</span><span class="p">,</span> <span class="s1">&#39;ROU&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1985</span><span class="p">,</span> <span class="s1">&#39;USA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1985</span><span class="p">,</span> <span class="s1">&#39;VNM&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1986</span><span class="p">,</span> <span class="s1">&#39;CHN&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1986</span><span class="p">,</span> <span class="s1">&#39;ROU&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1986</span><span class="p">,</span> <span class="s1">&#39;USA&#39;</span><span class="p">),</span>
            <span class="p">...</span>
            <span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="s1">&#39;CHN&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="s1">&#39;ROU&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="s1">&#39;RUS&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="s1">&#39;USA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="s1">&#39;VNM&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="s1">&#39;CHN&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="s1">&#39;ROU&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="s1">&#39;RUS&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="s1">&#39;USA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="s1">&#39;VNM&#39;</span><span class="p">)],</span>
           <span class="k">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">],</span> <span class="k">length</span><span class="o">=</span><span class="mi">160</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># Source to code that resolved issue:</span>
    <span class="c1"># https://stackoverflow.com/questions/18624039/pandas-reset-index-on-series-to-remove-multiindex</span>

<span class="n">country_chart5</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">country_chart5</span> <span class="o">=</span> <span class="n">country_chart5</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">country_chart5</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1984</td>
      <td>ROU</td>
      <td>199</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1984</td>
      <td>USA</td>
      <td>195</td>
    </tr>
    <tr>
      <td>2</td>
      <td>1984</td>
      <td>VNM</td>
      <td>162</td>
    </tr>
    <tr>
      <td>3</td>
      <td>1985</td>
      <td>CHN</td>
      <td>26</td>
    </tr>
    <tr>
      <td>4</td>
      <td>1985</td>
      <td>ROU</td>
      <td>201</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># v1 Data Preparation - Top 10 countries that most frequently placed in the top 10.</span>

<span class="c1"># From country_rank, select top 10 countries.</span>

<span class="n">country_list10</span> <span class="o">=</span> <span class="n">country_rank</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;total&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">country_list10</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
    </tr>
    <tr>
      <th>country</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>USA</td>
      <td>33</td>
    </tr>
    <tr>
      <td>CHN</td>
      <td>31</td>
    </tr>
    <tr>
      <td>RUS</td>
      <td>25</td>
    </tr>
    <tr>
      <td>VNM</td>
      <td>24</td>
    </tr>
    <tr>
      <td>ROU</td>
      <td>21</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># Get list of countries that will be filtered.</span>

<span class="n">country_list10</span><span class="o">.</span><span class="n">index</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="k">Index</span><span class="p">([</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;CHN&#39;</span><span class="p">,</span> <span class="s1">&#39;RUS&#39;</span><span class="p">,</span> <span class="s1">&#39;VNM&#39;</span><span class="p">,</span> <span class="s1">&#39;ROU&#39;</span><span class="p">,</span> <span class="s1">&#39;BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;KOR&#39;</span><span class="p">,</span> <span class="s1">&#39;HUN&#39;</span><span class="p">,</span> <span class="s1">&#39;IRN&#39;</span><span class="p">,</span> <span class="s1">&#39;TWN&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;country&#39;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># Use top 10 list to filter countries from chart.</span>

<span class="n">country_chart_top10</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;CHN&#39;</span><span class="p">,</span> <span class="s1">&#39;RUS&#39;</span><span class="p">,</span> <span class="s1">&#39;VNM&#39;</span><span class="p">,</span> <span class="s1">&#39;ROU&#39;</span><span class="p">,</span> <span class="s1">&#39;BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;KOR&#39;</span><span class="p">,</span> <span class="s1">&#39;HUN&#39;</span><span class="p">,</span> <span class="s1">&#39;IRN&#39;</span><span class="p">,</span> <span class="s1">&#39;TWN&#39;</span><span class="p">])]</span>
<span class="n">country_chart10</span> <span class="o">=</span> <span class="n">country_chart_top10</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;country&#39;</span><span class="p">])[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">country_chart10</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">country_chart10</span><span class="p">)</span>
<span class="n">country_chart10</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>total</th>
    </tr>
    <tr>
      <th>year</th>
      <th>country</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan="5" valign="top">1984</td>
      <td>BGR</td>
      <td>203</td>
    </tr>
    <tr>
      <td>HUN</td>
      <td>195</td>
    </tr>
    <tr>
      <td>ROU</td>
      <td>199</td>
    </tr>
    <tr>
      <td>USA</td>
      <td>195</td>
    </tr>
    <tr>
      <td>VNM</td>
      <td>162</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># Same multi-index issue and resolution as above.</span>
<span class="c1"># Source to code that resolved issue:</span>
    <span class="c1"># https://stackoverflow.com/questions/18624039/pandas-reset-index-on-series-to-remove-multiindex</span>

<span class="n">country_chart10</span><span class="o">.</span><span class="n">index</span>
<span class="n">country_chart10</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">country_chart10</span> <span class="o">=</span> <span class="n">country_chart10</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">country_chart10</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1984</td>
      <td>BGR</td>
      <td>203</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1984</td>
      <td>HUN</td>
      <td>195</td>
    </tr>
    <tr>
      <td>2</td>
      <td>1984</td>
      <td>ROU</td>
      <td>199</td>
    </tr>
    <tr>
      <td>3</td>
      <td>1984</td>
      <td>USA</td>
      <td>195</td>
    </tr>
    <tr>
      <td>4</td>
      <td>1984</td>
      <td>VNM</td>
      <td>162</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># v2 Data Preparatio - Top 5 countries from 2017 IMO.</span>

<span class="n">country_list5_2017</span> <span class="o">=</span> <span class="n">country_chart10</span><span class="p">[</span><span class="n">country_chart10</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">2017</span><span class="p">])]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">country_list5_2017</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>310</td>
      <td>2017</td>
      <td>KOR</td>
      <td>170</td>
    </tr>
    <tr>
      <td>307</td>
      <td>2017</td>
      <td>CHN</td>
      <td>159</td>
    </tr>
    <tr>
      <td>315</td>
      <td>2017</td>
      <td>VNM</td>
      <td>155</td>
    </tr>
    <tr>
      <td>314</td>
      <td>2017</td>
      <td>USA</td>
      <td>148</td>
    </tr>
    <tr>
      <td>309</td>
      <td>2017</td>
      <td>IRN</td>
      <td>142</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># Use top 10 list to filter countries from chart.</span>

<span class="n">country_chart_top5_2017</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;KOR&#39;</span><span class="p">,</span><span class="s1">&#39;CHN&#39;</span><span class="p">,</span><span class="s1">&#39;VNM&#39;</span><span class="p">,</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span><span class="s1">&#39;IRN&#39;</span><span class="p">])]</span>
<span class="n">country_chart5_2017</span> <span class="o">=</span> <span class="n">country_chart_top5_2017</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;country&#39;</span><span class="p">])[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">country_chart5_2017</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">country_chart5_2017</span><span class="p">)</span>
<span class="n">country_chart5_2017</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>total</th>
    </tr>
    <tr>
      <th>year</th>
      <th>country</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan="2" valign="top">1984</td>
      <td>USA</td>
      <td>195</td>
    </tr>
    <tr>
      <td>VNM</td>
      <td>162</td>
    </tr>
    <tr>
      <td rowspan="3" valign="top">1985</td>
      <td>CHN</td>
      <td>26</td>
    </tr>
    <tr>
      <td>IRN</td>
      <td>28</td>
    </tr>
    <tr>
      <td>USA</td>
      <td>180</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># Same multi-index issue and resolution as above.</span>
<span class="c1"># Source to code that resolved issue:</span>
    <span class="c1"># https://stackoverflow.com/questions/18624039/pandas-reset-index-on-series-to-remove-multiindex</span>

<span class="n">country_chart5_2017</span><span class="o">.</span><span class="n">index</span>
<span class="n">country_chart5_2017</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">country_chart5_2017</span> <span class="o">=</span> <span class="n">country_chart5_2017</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">country_chart5_2017</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1984</td>
      <td>USA</td>
      <td>195</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1984</td>
      <td>VNM</td>
      <td>162</td>
    </tr>
    <tr>
      <td>2</td>
      <td>1985</td>
      <td>CHN</td>
      <td>26</td>
    </tr>
    <tr>
      <td>3</td>
      <td>1985</td>
      <td>IRN</td>
      <td>28</td>
    </tr>
    <tr>
      <td>4</td>
      <td>1985</td>
      <td>USA</td>
      <td>180</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># v2 Data Preparatio - Top 10 countries from 2017 IMO.</span>

<span class="c1"># Select top 10</span>

<span class="n">country_list10_2017</span> <span class="o">=</span> <span class="n">country_chart10</span><span class="p">[</span><span class="n">country_chart10</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">2017</span><span class="p">])]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">country_list10_2017</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>310</td>
      <td>2017</td>
      <td>KOR</td>
      <td>170</td>
    </tr>
    <tr>
      <td>307</td>
      <td>2017</td>
      <td>CHN</td>
      <td>159</td>
    </tr>
    <tr>
      <td>315</td>
      <td>2017</td>
      <td>VNM</td>
      <td>155</td>
    </tr>
    <tr>
      <td>314</td>
      <td>2017</td>
      <td>USA</td>
      <td>148</td>
    </tr>
    <tr>
      <td>309</td>
      <td>2017</td>
      <td>IRN</td>
      <td>142</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># Use top 10 list to filter countries from chart.</span>

<span class="n">country_chart_top10_2017</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;KOR&#39;</span><span class="p">,</span><span class="s1">&#39;CHN&#39;</span><span class="p">,</span><span class="s1">&#39;VNM&#39;</span><span class="p">,</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span><span class="s1">&#39;IRN&#39;</span><span class="p">,</span><span class="s1">&#39;JPN&#39;</span><span class="p">,</span><span class="s1">&#39;SGP&#39;</span><span class="p">,</span><span class="s1">&#39;THA&#39;</span><span class="p">,</span><span class="s1">&#39;TWN&#39;</span><span class="p">,</span><span class="s1">&#39;UNK&#39;</span><span class="p">])]</span>
<span class="n">country_chart10_2017</span> <span class="o">=</span> <span class="n">country_chart_top10_2017</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;country&#39;</span><span class="p">])[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">country_chart10_2017</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">country_chart10_2017</span><span class="p">)</span>
<span class="n">country_chart10_2017</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>total</th>
    </tr>
    <tr>
      <th>year</th>
      <th>country</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan="3" valign="top">1984</td>
      <td>UNK</td>
      <td>168</td>
    </tr>
    <tr>
      <td>USA</td>
      <td>195</td>
    </tr>
    <tr>
      <td>VNM</td>
      <td>162</td>
    </tr>
    <tr>
      <td rowspan="2" valign="top">1985</td>
      <td>CHN</td>
      <td>26</td>
    </tr>
    <tr>
      <td>IRN</td>
      <td>28</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><span class="c1"># Same multi-index issue and resolution as above.</span>
<span class="c1"># Source to code that resolved issue:</span>
    <span class="c1"># https://stackoverflow.com/questions/18624039/pandas-reset-index-on-series-to-remove-multiindex</span>

<span class="n">country_chart10_2017</span><span class="o">.</span><span class="n">index</span>
<span class="n">country_chart10_2017</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">country_chart10_2017</span> <span class="o">=</span> <span class="n">country_chart10_2017</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">country_chart10_2017</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1984</td>
      <td>UNK</td>
      <td>168</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1984</td>
      <td>USA</td>
      <td>195</td>
    </tr>
    <tr>
      <td>2</td>
      <td>1984</td>
      <td>VNM</td>
      <td>162</td>
    </tr>
    <tr>
      <td>3</td>
      <td>1985</td>
      <td>CHN</td>
      <td>26</td>
    </tr>
    <tr>
      <td>4</td>
      <td>1985</td>
      <td>IRN</td>
      <td>28</td>
    </tr>
  </tbody>
</table>
</div>

<p>Chart 1 and 2 incorporate the following unique edits:
1. Configuration of the label and title font sizes of the axis and the legend.
2. Apply a color scheme from the Vega color schemes.</p>
<p>All charts include a chart title and axis titles.</p>
<div class="highlight"><pre><span></span><span class="c1"># Chart 1 : Multi Series Line Chart (v1 data with Top 5 countries placing in top 10 from 1984-2017)</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">country_chart5</span><span class="p">,</span>
          <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Top Five Countries by Historical Performance at the IMO from 1984-2017&quot;</span>
         <span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">)),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Team score&#39;</span><span class="p">)),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">,</span>
                    <span class="n">legend</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Country&quot;</span><span class="p">),</span>
                    <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;category10&#39;</span><span class="p">))</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_title</span><span class="p">(</span>
    <span class="n">fontSize</span><span class="o">=</span><span class="mi">25</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_axis</span><span class="p">(</span>
    <span class="n">labelFontSize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
    <span class="n">titleFontSize</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_legend</span><span class="p">(</span>
    <span class="n">labelFontSize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
    <span class="n">titleFontSize</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span><span class="o">.</span><span class="n">display</span><span class="p">(</span>
    <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;svg&#39;</span><span class="p">)</span>

<span class="c1"># Multi Series Line Chart - code source: https://altair-viz.github.io/gallery/multi_series_line.html</span>
<span class="c1"># Color customization code source: https://altair-viz.github.io/user_guide/customization.html#customizing-colors</span>
<span class="c1"># Color scheme code source: https://vega.github.io/vega/docs/schemes/</span>
<span class="c1"># Legend adjustment code source: https://altair-viz.github.io/user_guide/customization.html#adjusting-the-legend</span>
<span class="c1"># Configure title, axis, and legend source code: https://altair-viz.github.io/user_guide/configuration.html#</span>
<span class="c1"># SVG renderer source code: https://altair-viz.github.io/user_guide/custom_renderers.html</span>
<span class="c1"># Axis label - source code: https://altair-viz.github.io/user_guide/customization.html#adjusting-axis-labels</span>
<span class="c1"># Data source: https://www.kaggle.com/luckyt/imo-scores/data</span>
</pre></div>


<div id="altair-viz-1"></div>

<script type="text/javascript">
  (function(spec, embedOpt){
    const outputDiv = document.getElementById("altair-viz-1");
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.0.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}, "axis": {"labelFontSize": 13, "titleFontSize": 14}, "legend": {"labelFontSize": 13, "titleFontSize": 14}, "title": {"fontSize": 25}}, "data": {"name": "data-2ba359e24e11bbf1be26a3db2b17637a"}, "mark": "line", "encoding": {"color": {"type": "nominal", "field": "country", "legend": {"title": "Country"}, "scale": {"scheme": "category10"}}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "height": 500, "title": "Top Five Countries by Historical Performance at the IMO from 1984-2017", "width": 800, "$schema": "https://vega.github.io/schema/vega-lite/v4.0.0.json", "datasets": {"data-2ba359e24e11bbf1be26a3db2b17637a": [{"year": 1984, "country": "ROU", "total": 199}, {"year": 1984, "country": "USA", "total": 195}, {"year": 1984, "country": "VNM", "total": 162}, {"year": 1985, "country": "CHN", "total": 26}, {"year": 1985, "country": "ROU", "total": 201}, {"year": 1985, "country": "USA", "total": 180}, {"year": 1985, "country": "VNM", "total": 144}, {"year": 1986, "country": "CHN", "total": 177}, {"year": 1986, "country": "ROU", "total": 171}, {"year": 1986, "country": "USA", "total": 203}, {"year": 1986, "country": "VNM", "total": 146}, {"year": 1987, "country": "CHN", "total": 200}, {"year": 1987, "country": "ROU", "total": 250}, {"year": 1987, "country": "USA", "total": 220}, {"year": 1987, "country": "VNM", "total": 172}, {"year": 1988, "country": "CHN", "total": 201}, {"year": 1988, "country": "ROU", "total": 201}, {"year": 1988, "country": "USA", "total": 153}, {"year": 1988, "country": "VNM", "total": 166}, {"year": 1989, "country": "CHN", "total": 237}, {"year": 1989, "country": "ROU", "total": 223}, {"year": 1989, "country": "USA", "total": 207}, {"year": 1989, "country": "VNM", "total": 183}, {"year": 1990, "country": "CHN", "total": 230}, {"year": 1990, "country": "ROU", "total": 171}, {"year": 1990, "country": "USA", "total": 174}, {"year": 1990, "country": "VNM", "total": 104}, {"year": 1991, "country": "CHN", "total": 231}, {"year": 1991, "country": "ROU", "total": 225}, {"year": 1991, "country": "USA", "total": 212}, {"year": 1991, "country": "VNM", "total": 191}, {"year": 1992, "country": "CHN", "total": 240}, {"year": 1992, "country": "ROU", "total": 177}, {"year": 1992, "country": "RUS", "total": 158}, {"year": 1992, "country": "USA", "total": 181}, {"year": 1992, "country": "VNM", "total": 139}, {"year": 1993, "country": "CHN", "total": 215}, {"year": 1993, "country": "ROU", "total": 128}, {"year": 1993, "country": "RUS", "total": 177}, {"year": 1993, "country": "USA", "total": 151}, {"year": 1993, "country": "VNM", "total": 138}, {"year": 1994, "country": "CHN", "total": 229}, {"year": 1994, "country": "ROU", "total": 198}, {"year": 1994, "country": "RUS", "total": 224}, {"year": 1994, "country": "USA", "total": 252}, {"year": 1994, "country": "VNM", "total": 207}, {"year": 1995, "country": "CHN", "total": 236}, {"year": 1995, "country": "ROU", "total": 230}, {"year": 1995, "country": "RUS", "total": 227}, {"year": 1995, "country": "USA", "total": 178}, {"year": 1995, "country": "VNM", "total": 220}, {"year": 1996, "country": "CHN", "total": 160}, {"year": 1996, "country": "ROU", "total": 187}, {"year": 1996, "country": "RUS", "total": 162}, {"year": 1996, "country": "USA", "total": 185}, {"year": 1996, "country": "VNM", "total": 155}, {"year": 1997, "country": "CHN", "total": 223}, {"year": 1997, "country": "ROU", "total": 191}, {"year": 1997, "country": "RUS", "total": 202}, {"year": 1997, "country": "USA", "total": 202}, {"year": 1997, "country": "VNM", "total": 183}, {"year": 1998, "country": "ROU", "total": 155}, {"year": 1998, "country": "RUS", "total": 175}, {"year": 1998, "country": "USA", "total": 186}, {"year": 1998, "country": "VNM", "total": 158}, {"year": 1999, "country": "CHN", "total": 182}, {"year": 1999, "country": "ROU", "total": 173}, {"year": 1999, "country": "RUS", "total": 182}, {"year": 1999, "country": "USA", "total": 150}, {"year": 1999, "country": "VNM", "total": 177}, {"year": 2000, "country": "CHN", "total": 218}, {"year": 2000, "country": "ROU", "total": 139}, {"year": 2000, "country": "RUS", "total": 215}, {"year": 2000, "country": "USA", "total": 184}, {"year": 2000, "country": "VNM", "total": 169}, {"year": 2001, "country": "CHN", "total": 225}, {"year": 2001, "country": "ROU", "total": 129}, {"year": 2001, "country": "RUS", "total": 196}, {"year": 2001, "country": "USA", "total": 196}, {"year": 2001, "country": "VNM", "total": 139}, {"year": 2002, "country": "CHN", "total": 212}, {"year": 2002, "country": "ROU", "total": 157}, {"year": 2002, "country": "RUS", "total": 204}, {"year": 2002, "country": "USA", "total": 171}, {"year": 2002, "country": "VNM", "total": 166}, {"year": 2003, "country": "CHN", "total": 211}, {"year": 2003, "country": "ROU", "total": 143}, {"year": 2003, "country": "RUS", "total": 167}, {"year": 2003, "country": "USA", "total": 188}, {"year": 2003, "country": "VNM", "total": 172}, {"year": 2004, "country": "CHN", "total": 220}, {"year": 2004, "country": "ROU", "total": 176}, {"year": 2004, "country": "RUS", "total": 205}, {"year": 2004, "country": "USA", "total": 212}, {"year": 2004, "country": "VNM", "total": 196}, {"year": 2005, "country": "CHN", "total": 235}, {"year": 2005, "country": "ROU", "total": 191}, {"year": 2005, "country": "RUS", "total": 212}, {"year": 2005, "country": "USA", "total": 213}, {"year": 2005, "country": "VNM", "total": 143}, {"year": 2006, "country": "CHN", "total": 214}, {"year": 2006, "country": "ROU", "total": 152}, {"year": 2006, "country": "RUS", "total": 174}, {"year": 2006, "country": "USA", "total": 154}, {"year": 2006, "country": "VNM", "total": 131}, {"year": 2007, "country": "CHN", "total": 181}, {"year": 2007, "country": "ROU", "total": 146}, {"year": 2007, "country": "RUS", "total": 184}, {"year": 2007, "country": "USA", "total": 155}, {"year": 2007, "country": "VNM", "total": 168}, {"year": 2008, "country": "CHN", "total": 217}, {"year": 2008, "country": "ROU", "total": 141}, {"year": 2008, "country": "RUS", "total": 199}, {"year": 2008, "country": "USA", "total": 190}, {"year": 2008, "country": "VNM", "total": 159}, {"year": 2009, "country": "CHN", "total": 221}, {"year": 2009, "country": "ROU", "total": 163}, {"year": 2009, "country": "RUS", "total": 203}, {"year": 2009, "country": "USA", "total": 182}, {"year": 2009, "country": "VNM", "total": 161}, {"year": 2010, "country": "CHN", "total": 197}, {"year": 2010, "country": "ROU", "total": 127}, {"year": 2010, "country": "RUS", "total": 169}, {"year": 2010, "country": "USA", "total": 168}, {"year": 2010, "country": "VNM", "total": 133}, {"year": 2011, "country": "CHN", "total": 189}, {"year": 2011, "country": "ROU", "total": 154}, {"year": 2011, "country": "RUS", "total": 161}, {"year": 2011, "country": "USA", "total": 184}, {"year": 2011, "country": "VNM", "total": 113}, {"year": 2012, "country": "CHN", "total": 195}, {"year": 2012, "country": "ROU", "total": 144}, {"year": 2012, "country": "RUS", "total": 177}, {"year": 2012, "country": "USA", "total": 194}, {"year": 2012, "country": "VNM", "total": 148}, {"year": 2013, "country": "CHN", "total": 208}, {"year": 2013, "country": "ROU", "total": 134}, {"year": 2013, "country": "RUS", "total": 187}, {"year": 2013, "country": "USA", "total": 190}, {"year": 2013, "country": "VNM", "total": 180}, {"year": 2014, "country": "CHN", "total": 201}, {"year": 2014, "country": "ROU", "total": 156}, {"year": 2014, "country": "RUS", "total": 191}, {"year": 2014, "country": "USA", "total": 193}, {"year": 2014, "country": "VNM", "total": 157}, {"year": 2015, "country": "CHN", "total": 181}, {"year": 2015, "country": "ROU", "total": 132}, {"year": 2015, "country": "RUS", "total": 141}, {"year": 2015, "country": "USA", "total": 185}, {"year": 2015, "country": "VNM", "total": 151}, {"year": 2016, "country": "CHN", "total": 204}, {"year": 2016, "country": "ROU", "total": 130}, {"year": 2016, "country": "RUS", "total": 165}, {"year": 2016, "country": "USA", "total": 214}, {"year": 2016, "country": "VNM", "total": 151}, {"year": 2017, "country": "CHN", "total": 159}, {"year": 2017, "country": "ROU", "total": 115}, {"year": 2017, "country": "RUS", "total": 128}, {"year": 2017, "country": "USA", "total": 148}, {"year": 2017, "country": "VNM", "total": 155}]}}, {"renderer": "svg", "mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><span class="c1"># Chart 2 - Multi Series Line Chart (v2 data with Top 5 countries in 2017)</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">country_chart5_2017</span><span class="p">,</span>
          <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Top Five Countries from the 2017 IMO&quot;</span>
         <span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">)),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Team score&#39;</span><span class="p">)),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">,</span>
                    <span class="n">legend</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Country&quot;</span><span class="p">),</span>
                    <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;category10&#39;</span><span class="p">))</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_title</span><span class="p">(</span>
    <span class="n">fontSize</span><span class="o">=</span><span class="mi">25</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_axis</span><span class="p">(</span>
    <span class="n">labelFontSize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
    <span class="n">titleFontSize</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_legend</span><span class="p">(</span>
    <span class="n">labelFontSize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
    <span class="n">titleFontSize</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span><span class="o">.</span><span class="n">display</span><span class="p">(</span>
    <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;svg&#39;</span><span class="p">)</span>

<span class="c1"># Multi Series Line Chart - code source: https://altair-viz.github.io/gallery/multi_series_line.html</span>
<span class="c1"># Color customization code source: https://altair-viz.github.io/user_guide/customization.html#customizing-colors</span>
<span class="c1"># Color scheme code source: https://vega.github.io/vega/docs/schemes/</span>
<span class="c1"># Legend adjustment code source: https://altair-viz.github.io/user_guide/customization.html#adjusting-the-legend</span>
<span class="c1"># Configure title, axis, and legend source code: https://altair-viz.github.io/user_guide/configuration.html#</span>
<span class="c1"># SVG renderer source code: https://altair-viz.github.io/user_guide/custom_renderers.html</span>
<span class="c1"># Axis label - source code: https://altair-viz.github.io/user_guide/customization.html#adjusting-axis-labels</span>
<span class="c1"># Data source: https://www.kaggle.com/luckyt/imo-scores/data</span>
</pre></div>


<div id="altair-viz-2"></div>

<script type="text/javascript">
  (function(spec, embedOpt){
    const outputDiv = document.getElementById("altair-viz-2");
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.0.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}, "axis": {"labelFontSize": 13, "titleFontSize": 14}, "legend": {"labelFontSize": 13, "titleFontSize": 14}, "title": {"fontSize": 25}}, "data": {"name": "data-38c633b8e92b1ea570268ad8d33596d1"}, "mark": "line", "encoding": {"color": {"type": "nominal", "field": "country", "legend": {"title": "Country"}, "scale": {"scheme": "category10"}}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "height": 500, "title": "Top Five Countries from the 2017 IMO", "width": 800, "$schema": "https://vega.github.io/schema/vega-lite/v4.0.0.json", "datasets": {"data-38c633b8e92b1ea570268ad8d33596d1": [{"year": 1984, "country": "USA", "total": 195}, {"year": 1984, "country": "VNM", "total": 162}, {"year": 1985, "country": "CHN", "total": 26}, {"year": 1985, "country": "IRN", "total": 28}, {"year": 1985, "country": "USA", "total": 180}, {"year": 1985, "country": "VNM", "total": 144}, {"year": 1986, "country": "CHN", "total": 177}, {"year": 1986, "country": "USA", "total": 203}, {"year": 1986, "country": "VNM", "total": 146}, {"year": 1987, "country": "CHN", "total": 200}, {"year": 1987, "country": "IRN", "total": 70}, {"year": 1987, "country": "USA", "total": 220}, {"year": 1987, "country": "VNM", "total": 172}, {"year": 1988, "country": "CHN", "total": 201}, {"year": 1988, "country": "IRN", "total": 86}, {"year": 1988, "country": "KOR", "total": 79}, {"year": 1988, "country": "USA", "total": 153}, {"year": 1988, "country": "VNM", "total": 166}, {"year": 1989, "country": "CHN", "total": 237}, {"year": 1989, "country": "IRN", "total": 147}, {"year": 1989, "country": "KOR", "total": 97}, {"year": 1989, "country": "USA", "total": 207}, {"year": 1989, "country": "VNM", "total": 183}, {"year": 1990, "country": "CHN", "total": 230}, {"year": 1990, "country": "IRN", "total": 122}, {"year": 1990, "country": "KOR", "total": 79}, {"year": 1990, "country": "USA", "total": 174}, {"year": 1990, "country": "VNM", "total": 104}, {"year": 1991, "country": "CHN", "total": 231}, {"year": 1991, "country": "IRN", "total": 191}, {"year": 1991, "country": "KOR", "total": 151}, {"year": 1991, "country": "USA", "total": 212}, {"year": 1991, "country": "VNM", "total": 191}, {"year": 1992, "country": "CHN", "total": 240}, {"year": 1992, "country": "IRN", "total": 133}, {"year": 1992, "country": "KOR", "total": 122}, {"year": 1992, "country": "USA", "total": 181}, {"year": 1992, "country": "VNM", "total": 139}, {"year": 1993, "country": "CHN", "total": 215}, {"year": 1993, "country": "IRN", "total": 153}, {"year": 1993, "country": "KOR", "total": 116}, {"year": 1993, "country": "USA", "total": 151}, {"year": 1993, "country": "VNM", "total": 138}, {"year": 1994, "country": "CHN", "total": 229}, {"year": 1994, "country": "IRN", "total": 203}, {"year": 1994, "country": "KOR", "total": 170}, {"year": 1994, "country": "USA", "total": 252}, {"year": 1994, "country": "VNM", "total": 207}, {"year": 1995, "country": "CHN", "total": 236}, {"year": 1995, "country": "IRN", "total": 202}, {"year": 1995, "country": "KOR", "total": 203}, {"year": 1995, "country": "USA", "total": 178}, {"year": 1995, "country": "VNM", "total": 220}, {"year": 1996, "country": "CHN", "total": 160}, {"year": 1996, "country": "IRN", "total": 143}, {"year": 1996, "country": "KOR", "total": 151}, {"year": 1996, "country": "USA", "total": 185}, {"year": 1996, "country": "VNM", "total": 155}, {"year": 1997, "country": "CHN", "total": 223}, {"year": 1997, "country": "IRN", "total": 217}, {"year": 1997, "country": "KOR", "total": 164}, {"year": 1997, "country": "USA", "total": 202}, {"year": 1997, "country": "VNM", "total": 183}, {"year": 1998, "country": "IRN", "total": 211}, {"year": 1998, "country": "KOR", "total": 154}, {"year": 1998, "country": "USA", "total": 186}, {"year": 1998, "country": "VNM", "total": 158}, {"year": 1999, "country": "CHN", "total": 182}, {"year": 1999, "country": "IRN", "total": 159}, {"year": 1999, "country": "KOR", "total": 164}, {"year": 1999, "country": "USA", "total": 150}, {"year": 1999, "country": "VNM", "total": 177}, {"year": 2000, "country": "CHN", "total": 218}, {"year": 2000, "country": "IRN", "total": 155}, {"year": 2000, "country": "KOR", "total": 172}, {"year": 2000, "country": "USA", "total": 184}, {"year": 2000, "country": "VNM", "total": 169}, {"year": 2001, "country": "CHN", "total": 225}, {"year": 2001, "country": "IRN", "total": 111}, {"year": 2001, "country": "KOR", "total": 185}, {"year": 2001, "country": "USA", "total": 196}, {"year": 2001, "country": "VNM", "total": 139}, {"year": 2002, "country": "CHN", "total": 212}, {"year": 2002, "country": "IRN", "total": 143}, {"year": 2002, "country": "KOR", "total": 163}, {"year": 2002, "country": "USA", "total": 171}, {"year": 2002, "country": "VNM", "total": 166}, {"year": 2003, "country": "CHN", "total": 211}, {"year": 2003, "country": "IRN", "total": 112}, {"year": 2003, "country": "KOR", "total": 157}, {"year": 2003, "country": "USA", "total": 188}, {"year": 2003, "country": "VNM", "total": 172}, {"year": 2004, "country": "CHN", "total": 220}, {"year": 2004, "country": "IRN", "total": 178}, {"year": 2004, "country": "KOR", "total": 166}, {"year": 2004, "country": "USA", "total": 212}, {"year": 2004, "country": "VNM", "total": 196}, {"year": 2005, "country": "CHN", "total": 235}, {"year": 2005, "country": "IRN", "total": 201}, {"year": 2005, "country": "KOR", "total": 200}, {"year": 2005, "country": "USA", "total": 213}, {"year": 2005, "country": "VNM", "total": 143}, {"year": 2006, "country": "CHN", "total": 214}, {"year": 2006, "country": "IRN", "total": 145}, {"year": 2006, "country": "KOR", "total": 170}, {"year": 2006, "country": "USA", "total": 154}, {"year": 2006, "country": "VNM", "total": 131}, {"year": 2007, "country": "CHN", "total": 181}, {"year": 2007, "country": "IRN", "total": 143}, {"year": 2007, "country": "KOR", "total": 168}, {"year": 2007, "country": "USA", "total": 155}, {"year": 2007, "country": "VNM", "total": 168}, {"year": 2008, "country": "CHN", "total": 217}, {"year": 2008, "country": "IRN", "total": 181}, {"year": 2008, "country": "KOR", "total": 188}, {"year": 2008, "country": "USA", "total": 190}, {"year": 2008, "country": "VNM", "total": 159}, {"year": 2009, "country": "CHN", "total": 221}, {"year": 2009, "country": "IRN", "total": 161}, {"year": 2009, "country": "KOR", "total": 188}, {"year": 2009, "country": "USA", "total": 182}, {"year": 2009, "country": "VNM", "total": 161}, {"year": 2010, "country": "CHN", "total": 197}, {"year": 2010, "country": "IRN", "total": 127}, {"year": 2010, "country": "KOR", "total": 156}, {"year": 2010, "country": "USA", "total": 168}, {"year": 2010, "country": "VNM", "total": 133}, {"year": 2011, "country": "CHN", "total": 189}, {"year": 2011, "country": "IRN", "total": 151}, {"year": 2011, "country": "KOR", "total": 144}, {"year": 2011, "country": "USA", "total": 184}, {"year": 2011, "country": "VNM", "total": 113}, {"year": 2012, "country": "CHN", "total": 195}, {"year": 2012, "country": "IRN", "total": 151}, {"year": 2012, "country": "KOR", "total": 209}, {"year": 2012, "country": "USA", "total": 194}, {"year": 2012, "country": "VNM", "total": 148}, {"year": 2013, "country": "CHN", "total": 208}, {"year": 2013, "country": "IRN", "total": 168}, {"year": 2013, "country": "KOR", "total": 204}, {"year": 2013, "country": "USA", "total": 190}, {"year": 2013, "country": "VNM", "total": 180}, {"year": 2014, "country": "CHN", "total": 201}, {"year": 2014, "country": "IRN", "total": 131}, {"year": 2014, "country": "KOR", "total": 172}, {"year": 2014, "country": "USA", "total": 193}, {"year": 2014, "country": "VNM", "total": 157}, {"year": 2015, "country": "CHN", "total": 181}, {"year": 2015, "country": "IRN", "total": 145}, {"year": 2015, "country": "KOR", "total": 161}, {"year": 2015, "country": "USA", "total": 185}, {"year": 2015, "country": "VNM", "total": 151}, {"year": 2016, "country": "CHN", "total": 204}, {"year": 2016, "country": "IRN", "total": 125}, {"year": 2016, "country": "KOR", "total": 207}, {"year": 2016, "country": "USA", "total": 214}, {"year": 2016, "country": "VNM", "total": 151}, {"year": 2017, "country": "CHN", "total": 159}, {"year": 2017, "country": "IRN", "total": 142}, {"year": 2017, "country": "KOR", "total": 170}, {"year": 2017, "country": "USA", "total": 148}, {"year": 2017, "country": "VNM", "total": 155}]}}, {"renderer": "svg", "mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><span class="c1"># Chart 3:  Multi-Line Highlight (v1 chart with Top 5 countries placing in top 10 from 1984-2017)</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">country_chart5_2017</span>

<span class="n">highlight</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;single&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span>
                          <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">],</span> <span class="n">nearest</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">base</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">source</span><span class="p">,</span>
                 <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Top Five Countries by Historical Performance at the IMO from 1984-2017&quot;</span>
                <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">)),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Team score&#39;</span><span class="p">)),</span>
    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;country:N&#39;</span>
<span class="p">)</span>

<span class="n">points</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_circle</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">opacity</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span>
    <span class="n">highlight</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span>
<span class="p">)</span>

<span class="n">lines</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">size</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="o">~</span><span class="n">highlight</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">points</span> <span class="o">+</span> <span class="n">lines</span>

<span class="c1"># Multi-Line Highlight - code source: https://altair-viz.github.io/gallery/multiline_highlight.html</span>
<span class="c1"># Axis label - source code: https://altair-viz.github.io/user_guide/customization.html#adjusting-axis-labels</span>
<span class="c1"># Data source: https://www.kaggle.com/luckyt/imo-scores/data</span>
</pre></div>


<div id="altair-viz-3"></div>

<script type="text/javascript">
  (function(spec, embedOpt){
    const outputDiv = document.getElementById("altair-viz-3");
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.0.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "layer": [{"mark": "circle", "encoding": {"color": {"type": "nominal", "field": "country"}, "opacity": {"value": 0}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "height": 500, "selection": {"selector001": {"type": "single", "on": "mouseover", "fields": ["country"], "nearest": true}}, "title": "Top Five Countries by Historical Performance at the IMO from 1984-2017", "width": 800}, {"mark": "line", "encoding": {"color": {"type": "nominal", "field": "country"}, "size": {"condition": {"value": 1, "selection": {"not": "selector001"}}, "value": 3}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "title": "Top Five Countries by Historical Performance at the IMO from 1984-2017"}], "data": {"name": "data-38c633b8e92b1ea570268ad8d33596d1"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.0.0.json", "datasets": {"data-38c633b8e92b1ea570268ad8d33596d1": [{"year": 1984, "country": "USA", "total": 195}, {"year": 1984, "country": "VNM", "total": 162}, {"year": 1985, "country": "CHN", "total": 26}, {"year": 1985, "country": "IRN", "total": 28}, {"year": 1985, "country": "USA", "total": 180}, {"year": 1985, "country": "VNM", "total": 144}, {"year": 1986, "country": "CHN", "total": 177}, {"year": 1986, "country": "USA", "total": 203}, {"year": 1986, "country": "VNM", "total": 146}, {"year": 1987, "country": "CHN", "total": 200}, {"year": 1987, "country": "IRN", "total": 70}, {"year": 1987, "country": "USA", "total": 220}, {"year": 1987, "country": "VNM", "total": 172}, {"year": 1988, "country": "CHN", "total": 201}, {"year": 1988, "country": "IRN", "total": 86}, {"year": 1988, "country": "KOR", "total": 79}, {"year": 1988, "country": "USA", "total": 153}, {"year": 1988, "country": "VNM", "total": 166}, {"year": 1989, "country": "CHN", "total": 237}, {"year": 1989, "country": "IRN", "total": 147}, {"year": 1989, "country": "KOR", "total": 97}, {"year": 1989, "country": "USA", "total": 207}, {"year": 1989, "country": "VNM", "total": 183}, {"year": 1990, "country": "CHN", "total": 230}, {"year": 1990, "country": "IRN", "total": 122}, {"year": 1990, "country": "KOR", "total": 79}, {"year": 1990, "country": "USA", "total": 174}, {"year": 1990, "country": "VNM", "total": 104}, {"year": 1991, "country": "CHN", "total": 231}, {"year": 1991, "country": "IRN", "total": 191}, {"year": 1991, "country": "KOR", "total": 151}, {"year": 1991, "country": "USA", "total": 212}, {"year": 1991, "country": "VNM", "total": 191}, {"year": 1992, "country": "CHN", "total": 240}, {"year": 1992, "country": "IRN", "total": 133}, {"year": 1992, "country": "KOR", "total": 122}, {"year": 1992, "country": "USA", "total": 181}, {"year": 1992, "country": "VNM", "total": 139}, {"year": 1993, "country": "CHN", "total": 215}, {"year": 1993, "country": "IRN", "total": 153}, {"year": 1993, "country": "KOR", "total": 116}, {"year": 1993, "country": "USA", "total": 151}, {"year": 1993, "country": "VNM", "total": 138}, {"year": 1994, "country": "CHN", "total": 229}, {"year": 1994, "country": "IRN", "total": 203}, {"year": 1994, "country": "KOR", "total": 170}, {"year": 1994, "country": "USA", "total": 252}, {"year": 1994, "country": "VNM", "total": 207}, {"year": 1995, "country": "CHN", "total": 236}, {"year": 1995, "country": "IRN", "total": 202}, {"year": 1995, "country": "KOR", "total": 203}, {"year": 1995, "country": "USA", "total": 178}, {"year": 1995, "country": "VNM", "total": 220}, {"year": 1996, "country": "CHN", "total": 160}, {"year": 1996, "country": "IRN", "total": 143}, {"year": 1996, "country": "KOR", "total": 151}, {"year": 1996, "country": "USA", "total": 185}, {"year": 1996, "country": "VNM", "total": 155}, {"year": 1997, "country": "CHN", "total": 223}, {"year": 1997, "country": "IRN", "total": 217}, {"year": 1997, "country": "KOR", "total": 164}, {"year": 1997, "country": "USA", "total": 202}, {"year": 1997, "country": "VNM", "total": 183}, {"year": 1998, "country": "IRN", "total": 211}, {"year": 1998, "country": "KOR", "total": 154}, {"year": 1998, "country": "USA", "total": 186}, {"year": 1998, "country": "VNM", "total": 158}, {"year": 1999, "country": "CHN", "total": 182}, {"year": 1999, "country": "IRN", "total": 159}, {"year": 1999, "country": "KOR", "total": 164}, {"year": 1999, "country": "USA", "total": 150}, {"year": 1999, "country": "VNM", "total": 177}, {"year": 2000, "country": "CHN", "total": 218}, {"year": 2000, "country": "IRN", "total": 155}, {"year": 2000, "country": "KOR", "total": 172}, {"year": 2000, "country": "USA", "total": 184}, {"year": 2000, "country": "VNM", "total": 169}, {"year": 2001, "country": "CHN", "total": 225}, {"year": 2001, "country": "IRN", "total": 111}, {"year": 2001, "country": "KOR", "total": 185}, {"year": 2001, "country": "USA", "total": 196}, {"year": 2001, "country": "VNM", "total": 139}, {"year": 2002, "country": "CHN", "total": 212}, {"year": 2002, "country": "IRN", "total": 143}, {"year": 2002, "country": "KOR", "total": 163}, {"year": 2002, "country": "USA", "total": 171}, {"year": 2002, "country": "VNM", "total": 166}, {"year": 2003, "country": "CHN", "total": 211}, {"year": 2003, "country": "IRN", "total": 112}, {"year": 2003, "country": "KOR", "total": 157}, {"year": 2003, "country": "USA", "total": 188}, {"year": 2003, "country": "VNM", "total": 172}, {"year": 2004, "country": "CHN", "total": 220}, {"year": 2004, "country": "IRN", "total": 178}, {"year": 2004, "country": "KOR", "total": 166}, {"year": 2004, "country": "USA", "total": 212}, {"year": 2004, "country": "VNM", "total": 196}, {"year": 2005, "country": "CHN", "total": 235}, {"year": 2005, "country": "IRN", "total": 201}, {"year": 2005, "country": "KOR", "total": 200}, {"year": 2005, "country": "USA", "total": 213}, {"year": 2005, "country": "VNM", "total": 143}, {"year": 2006, "country": "CHN", "total": 214}, {"year": 2006, "country": "IRN", "total": 145}, {"year": 2006, "country": "KOR", "total": 170}, {"year": 2006, "country": "USA", "total": 154}, {"year": 2006, "country": "VNM", "total": 131}, {"year": 2007, "country": "CHN", "total": 181}, {"year": 2007, "country": "IRN", "total": 143}, {"year": 2007, "country": "KOR", "total": 168}, {"year": 2007, "country": "USA", "total": 155}, {"year": 2007, "country": "VNM", "total": 168}, {"year": 2008, "country": "CHN", "total": 217}, {"year": 2008, "country": "IRN", "total": 181}, {"year": 2008, "country": "KOR", "total": 188}, {"year": 2008, "country": "USA", "total": 190}, {"year": 2008, "country": "VNM", "total": 159}, {"year": 2009, "country": "CHN", "total": 221}, {"year": 2009, "country": "IRN", "total": 161}, {"year": 2009, "country": "KOR", "total": 188}, {"year": 2009, "country": "USA", "total": 182}, {"year": 2009, "country": "VNM", "total": 161}, {"year": 2010, "country": "CHN", "total": 197}, {"year": 2010, "country": "IRN", "total": 127}, {"year": 2010, "country": "KOR", "total": 156}, {"year": 2010, "country": "USA", "total": 168}, {"year": 2010, "country": "VNM", "total": 133}, {"year": 2011, "country": "CHN", "total": 189}, {"year": 2011, "country": "IRN", "total": 151}, {"year": 2011, "country": "KOR", "total": 144}, {"year": 2011, "country": "USA", "total": 184}, {"year": 2011, "country": "VNM", "total": 113}, {"year": 2012, "country": "CHN", "total": 195}, {"year": 2012, "country": "IRN", "total": 151}, {"year": 2012, "country": "KOR", "total": 209}, {"year": 2012, "country": "USA", "total": 194}, {"year": 2012, "country": "VNM", "total": 148}, {"year": 2013, "country": "CHN", "total": 208}, {"year": 2013, "country": "IRN", "total": 168}, {"year": 2013, "country": "KOR", "total": 204}, {"year": 2013, "country": "USA", "total": 190}, {"year": 2013, "country": "VNM", "total": 180}, {"year": 2014, "country": "CHN", "total": 201}, {"year": 2014, "country": "IRN", "total": 131}, {"year": 2014, "country": "KOR", "total": 172}, {"year": 2014, "country": "USA", "total": 193}, {"year": 2014, "country": "VNM", "total": 157}, {"year": 2015, "country": "CHN", "total": 181}, {"year": 2015, "country": "IRN", "total": 145}, {"year": 2015, "country": "KOR", "total": 161}, {"year": 2015, "country": "USA", "total": 185}, {"year": 2015, "country": "VNM", "total": 151}, {"year": 2016, "country": "CHN", "total": 204}, {"year": 2016, "country": "IRN", "total": 125}, {"year": 2016, "country": "KOR", "total": 207}, {"year": 2016, "country": "USA", "total": 214}, {"year": 2016, "country": "VNM", "total": 151}, {"year": 2017, "country": "CHN", "total": 159}, {"year": 2017, "country": "IRN", "total": 142}, {"year": 2017, "country": "KOR", "total": 170}, {"year": 2017, "country": "USA", "total": 148}, {"year": 2017, "country": "VNM", "total": 155}]}}, {"mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><span class="c1"># Chart 4:  Multi-Line Highlight (v2 chart with Top 5 countries in 2017)</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">country_chart5</span>

<span class="n">highlight</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;single&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span>
                          <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">],</span> <span class="n">nearest</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">base</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">source</span><span class="p">,</span>
                 <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Top Five Countries from the 2017 IMO&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">)),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Team score&#39;</span><span class="p">)),</span>
    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;country:N&#39;</span>
<span class="p">)</span>

<span class="n">points</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_circle</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">opacity</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span>
    <span class="n">highlight</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span>
<span class="p">)</span>

<span class="n">lines</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">size</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="o">~</span><span class="n">highlight</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">points</span> <span class="o">+</span> <span class="n">lines</span>

<span class="c1"># Multi-Line Highlight - code source: https://altair-viz.github.io/gallery/multiline_highlight.html</span>
<span class="c1"># Axis label - source code: https://altair-viz.github.io/user_guide/customization.html#adjusting-axis-labels</span>
<span class="c1"># Data source: https://www.kaggle.com/luckyt/imo-scores/data</span>
</pre></div>


<div id="altair-viz-4"></div>

<script type="text/javascript">
  (function(spec, embedOpt){
    const outputDiv = document.getElementById("altair-viz-4");
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.0.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "layer": [{"mark": "circle", "encoding": {"color": {"type": "nominal", "field": "country"}, "opacity": {"value": 0}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "height": 500, "selection": {"selector002": {"type": "single", "on": "mouseover", "fields": ["country"], "nearest": true}}, "title": "Top Five Countries from the 2017 IMO", "width": 800}, {"mark": "line", "encoding": {"color": {"type": "nominal", "field": "country"}, "size": {"condition": {"value": 1, "selection": {"not": "selector002"}}, "value": 3}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "title": "Top Five Countries from the 2017 IMO"}], "data": {"name": "data-2ba359e24e11bbf1be26a3db2b17637a"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.0.0.json", "datasets": {"data-2ba359e24e11bbf1be26a3db2b17637a": [{"year": 1984, "country": "ROU", "total": 199}, {"year": 1984, "country": "USA", "total": 195}, {"year": 1984, "country": "VNM", "total": 162}, {"year": 1985, "country": "CHN", "total": 26}, {"year": 1985, "country": "ROU", "total": 201}, {"year": 1985, "country": "USA", "total": 180}, {"year": 1985, "country": "VNM", "total": 144}, {"year": 1986, "country": "CHN", "total": 177}, {"year": 1986, "country": "ROU", "total": 171}, {"year": 1986, "country": "USA", "total": 203}, {"year": 1986, "country": "VNM", "total": 146}, {"year": 1987, "country": "CHN", "total": 200}, {"year": 1987, "country": "ROU", "total": 250}, {"year": 1987, "country": "USA", "total": 220}, {"year": 1987, "country": "VNM", "total": 172}, {"year": 1988, "country": "CHN", "total": 201}, {"year": 1988, "country": "ROU", "total": 201}, {"year": 1988, "country": "USA", "total": 153}, {"year": 1988, "country": "VNM", "total": 166}, {"year": 1989, "country": "CHN", "total": 237}, {"year": 1989, "country": "ROU", "total": 223}, {"year": 1989, "country": "USA", "total": 207}, {"year": 1989, "country": "VNM", "total": 183}, {"year": 1990, "country": "CHN", "total": 230}, {"year": 1990, "country": "ROU", "total": 171}, {"year": 1990, "country": "USA", "total": 174}, {"year": 1990, "country": "VNM", "total": 104}, {"year": 1991, "country": "CHN", "total": 231}, {"year": 1991, "country": "ROU", "total": 225}, {"year": 1991, "country": "USA", "total": 212}, {"year": 1991, "country": "VNM", "total": 191}, {"year": 1992, "country": "CHN", "total": 240}, {"year": 1992, "country": "ROU", "total": 177}, {"year": 1992, "country": "RUS", "total": 158}, {"year": 1992, "country": "USA", "total": 181}, {"year": 1992, "country": "VNM", "total": 139}, {"year": 1993, "country": "CHN", "total": 215}, {"year": 1993, "country": "ROU", "total": 128}, {"year": 1993, "country": "RUS", "total": 177}, {"year": 1993, "country": "USA", "total": 151}, {"year": 1993, "country": "VNM", "total": 138}, {"year": 1994, "country": "CHN", "total": 229}, {"year": 1994, "country": "ROU", "total": 198}, {"year": 1994, "country": "RUS", "total": 224}, {"year": 1994, "country": "USA", "total": 252}, {"year": 1994, "country": "VNM", "total": 207}, {"year": 1995, "country": "CHN", "total": 236}, {"year": 1995, "country": "ROU", "total": 230}, {"year": 1995, "country": "RUS", "total": 227}, {"year": 1995, "country": "USA", "total": 178}, {"year": 1995, "country": "VNM", "total": 220}, {"year": 1996, "country": "CHN", "total": 160}, {"year": 1996, "country": "ROU", "total": 187}, {"year": 1996, "country": "RUS", "total": 162}, {"year": 1996, "country": "USA", "total": 185}, {"year": 1996, "country": "VNM", "total": 155}, {"year": 1997, "country": "CHN", "total": 223}, {"year": 1997, "country": "ROU", "total": 191}, {"year": 1997, "country": "RUS", "total": 202}, {"year": 1997, "country": "USA", "total": 202}, {"year": 1997, "country": "VNM", "total": 183}, {"year": 1998, "country": "ROU", "total": 155}, {"year": 1998, "country": "RUS", "total": 175}, {"year": 1998, "country": "USA", "total": 186}, {"year": 1998, "country": "VNM", "total": 158}, {"year": 1999, "country": "CHN", "total": 182}, {"year": 1999, "country": "ROU", "total": 173}, {"year": 1999, "country": "RUS", "total": 182}, {"year": 1999, "country": "USA", "total": 150}, {"year": 1999, "country": "VNM", "total": 177}, {"year": 2000, "country": "CHN", "total": 218}, {"year": 2000, "country": "ROU", "total": 139}, {"year": 2000, "country": "RUS", "total": 215}, {"year": 2000, "country": "USA", "total": 184}, {"year": 2000, "country": "VNM", "total": 169}, {"year": 2001, "country": "CHN", "total": 225}, {"year": 2001, "country": "ROU", "total": 129}, {"year": 2001, "country": "RUS", "total": 196}, {"year": 2001, "country": "USA", "total": 196}, {"year": 2001, "country": "VNM", "total": 139}, {"year": 2002, "country": "CHN", "total": 212}, {"year": 2002, "country": "ROU", "total": 157}, {"year": 2002, "country": "RUS", "total": 204}, {"year": 2002, "country": "USA", "total": 171}, {"year": 2002, "country": "VNM", "total": 166}, {"year": 2003, "country": "CHN", "total": 211}, {"year": 2003, "country": "ROU", "total": 143}, {"year": 2003, "country": "RUS", "total": 167}, {"year": 2003, "country": "USA", "total": 188}, {"year": 2003, "country": "VNM", "total": 172}, {"year": 2004, "country": "CHN", "total": 220}, {"year": 2004, "country": "ROU", "total": 176}, {"year": 2004, "country": "RUS", "total": 205}, {"year": 2004, "country": "USA", "total": 212}, {"year": 2004, "country": "VNM", "total": 196}, {"year": 2005, "country": "CHN", "total": 235}, {"year": 2005, "country": "ROU", "total": 191}, {"year": 2005, "country": "RUS", "total": 212}, {"year": 2005, "country": "USA", "total": 213}, {"year": 2005, "country": "VNM", "total": 143}, {"year": 2006, "country": "CHN", "total": 214}, {"year": 2006, "country": "ROU", "total": 152}, {"year": 2006, "country": "RUS", "total": 174}, {"year": 2006, "country": "USA", "total": 154}, {"year": 2006, "country": "VNM", "total": 131}, {"year": 2007, "country": "CHN", "total": 181}, {"year": 2007, "country": "ROU", "total": 146}, {"year": 2007, "country": "RUS", "total": 184}, {"year": 2007, "country": "USA", "total": 155}, {"year": 2007, "country": "VNM", "total": 168}, {"year": 2008, "country": "CHN", "total": 217}, {"year": 2008, "country": "ROU", "total": 141}, {"year": 2008, "country": "RUS", "total": 199}, {"year": 2008, "country": "USA", "total": 190}, {"year": 2008, "country": "VNM", "total": 159}, {"year": 2009, "country": "CHN", "total": 221}, {"year": 2009, "country": "ROU", "total": 163}, {"year": 2009, "country": "RUS", "total": 203}, {"year": 2009, "country": "USA", "total": 182}, {"year": 2009, "country": "VNM", "total": 161}, {"year": 2010, "country": "CHN", "total": 197}, {"year": 2010, "country": "ROU", "total": 127}, {"year": 2010, "country": "RUS", "total": 169}, {"year": 2010, "country": "USA", "total": 168}, {"year": 2010, "country": "VNM", "total": 133}, {"year": 2011, "country": "CHN", "total": 189}, {"year": 2011, "country": "ROU", "total": 154}, {"year": 2011, "country": "RUS", "total": 161}, {"year": 2011, "country": "USA", "total": 184}, {"year": 2011, "country": "VNM", "total": 113}, {"year": 2012, "country": "CHN", "total": 195}, {"year": 2012, "country": "ROU", "total": 144}, {"year": 2012, "country": "RUS", "total": 177}, {"year": 2012, "country": "USA", "total": 194}, {"year": 2012, "country": "VNM", "total": 148}, {"year": 2013, "country": "CHN", "total": 208}, {"year": 2013, "country": "ROU", "total": 134}, {"year": 2013, "country": "RUS", "total": 187}, {"year": 2013, "country": "USA", "total": 190}, {"year": 2013, "country": "VNM", "total": 180}, {"year": 2014, "country": "CHN", "total": 201}, {"year": 2014, "country": "ROU", "total": 156}, {"year": 2014, "country": "RUS", "total": 191}, {"year": 2014, "country": "USA", "total": 193}, {"year": 2014, "country": "VNM", "total": 157}, {"year": 2015, "country": "CHN", "total": 181}, {"year": 2015, "country": "ROU", "total": 132}, {"year": 2015, "country": "RUS", "total": 141}, {"year": 2015, "country": "USA", "total": 185}, {"year": 2015, "country": "VNM", "total": 151}, {"year": 2016, "country": "CHN", "total": 204}, {"year": 2016, "country": "ROU", "total": 130}, {"year": 2016, "country": "RUS", "total": 165}, {"year": 2016, "country": "USA", "total": 214}, {"year": 2016, "country": "VNM", "total": 151}, {"year": 2017, "country": "CHN", "total": 159}, {"year": 2017, "country": "ROU", "total": 115}, {"year": 2017, "country": "RUS", "total": 128}, {"year": 2017, "country": "USA", "total": 148}, {"year": 2017, "country": "VNM", "total": 155}]}}, {"mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><span class="c1"># Chart 5: Multi Series Line Chart - adjusting axis with clamp</span>
    <span class="c1"># (v1 chart with Top 10 countries placing in top 10 from 1984-2017)</span>


<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">country_chart10</span><span class="p">,</span>
          <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Top Ten Countries by Historical Performance at the IMO from 1984-2017&quot;</span>
         <span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span>
          <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">),</span>
          <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span>
              <span class="n">domain</span><span class="o">=</span><span class="p">(</span><span class="mi">1986</span><span class="p">,</span><span class="mi">2020</span><span class="p">),</span>
              <span class="n">clamp</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">)),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span>
          <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Team score&#39;</span><span class="p">),</span>
          <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span>
              <span class="n">domain</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">300</span><span class="p">),</span>
              <span class="n">clamp</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">)),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_title</span><span class="p">(</span>
    <span class="n">fontSize</span><span class="o">=</span><span class="mi">25</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_axis</span><span class="p">(</span>
    <span class="n">labelFontSize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
    <span class="n">titleFontSize</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_legend</span><span class="p">(</span>
    <span class="n">labelFontSize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
    <span class="n">titleFontSize</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">()</span>

<span class="c1"># Adjusting axis with clamp - code reference: https://altair-viz.github.io/user_guide/customization.html</span>
<span class="c1"># Configure title, axis, and legend source code: https://altair-viz.github.io/user_guide/configuration.html#</span>
<span class="c1"># Axis label - source code: https://altair-viz.github.io/user_guide/customization.html#adjusting-axis-labels</span>
<span class="c1"># Data source: https://www.kaggle.com/luckyt/imo-scores/data</span>
</pre></div>


<div id="altair-viz-5"></div>

<script type="text/javascript">
  (function(spec, embedOpt){
    const outputDiv = document.getElementById("altair-viz-5");
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.0.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}, "axis": {"labelFontSize": 13, "titleFontSize": 14}, "legend": {"labelFontSize": 13, "titleFontSize": 14}, "title": {"fontSize": 25}}, "data": {"name": "data-1bd7b68959b49363df49f3f3079f819f"}, "mark": "line", "encoding": {"color": {"type": "nominal", "field": "country"}, "x": {"type": "quantitative", "axis": {"title": "Year"}, "field": "year", "scale": {"clamp": true, "domain": [1986, 2020]}}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total", "scale": {"clamp": true, "domain": [0, 300]}}}, "height": 500, "selection": {"selector003": {"type": "interval", "bind": "scales", "encodings": ["x", "y"]}}, "title": "Top Ten Countries by Historical Performance at the IMO from 1984-2017", "width": 800, "$schema": "https://vega.github.io/schema/vega-lite/v4.0.0.json", "datasets": {"data-1bd7b68959b49363df49f3f3079f819f": [{"year": 1984, "country": "BGR", "total": 203}, {"year": 1984, "country": "HUN", "total": 195}, {"year": 1984, "country": "ROU", "total": 199}, {"year": 1984, "country": "USA", "total": 195}, {"year": 1984, "country": "VNM", "total": 162}, {"year": 1985, "country": "BGR", "total": 165}, {"year": 1985, "country": "CHN", "total": 26}, {"year": 1985, "country": "HUN", "total": 168}, {"year": 1985, "country": "IRN", "total": 28}, {"year": 1985, "country": "ROU", "total": 201}, {"year": 1985, "country": "USA", "total": 180}, {"year": 1985, "country": "VNM", "total": 144}, {"year": 1986, "country": "BGR", "total": 161}, {"year": 1986, "country": "CHN", "total": 177}, {"year": 1986, "country": "HUN", "total": 151}, {"year": 1986, "country": "ROU", "total": 171}, {"year": 1986, "country": "USA", "total": 203}, {"year": 1986, "country": "VNM", "total": 146}, {"year": 1987, "country": "BGR", "total": 210}, {"year": 1987, "country": "CHN", "total": 200}, {"year": 1987, "country": "HUN", "total": 218}, {"year": 1987, "country": "IRN", "total": 70}, {"year": 1987, "country": "ROU", "total": 250}, {"year": 1987, "country": "USA", "total": 220}, {"year": 1987, "country": "VNM", "total": 172}, {"year": 1988, "country": "BGR", "total": 144}, {"year": 1988, "country": "CHN", "total": 201}, {"year": 1988, "country": "HUN", "total": 109}, {"year": 1988, "country": "IRN", "total": 86}, {"year": 1988, "country": "KOR", "total": 79}, {"year": 1988, "country": "ROU", "total": 201}, {"year": 1988, "country": "USA", "total": 153}, {"year": 1988, "country": "VNM", "total": 166}, {"year": 1989, "country": "BGR", "total": 195}, {"year": 1989, "country": "CHN", "total": 237}, {"year": 1989, "country": "HUN", "total": 175}, {"year": 1989, "country": "IRN", "total": 147}, {"year": 1989, "country": "KOR", "total": 97}, {"year": 1989, "country": "ROU", "total": 223}, {"year": 1989, "country": "USA", "total": 207}, {"year": 1989, "country": "VNM", "total": 183}, {"year": 1990, "country": "BGR", "total": 152}, {"year": 1990, "country": "CHN", "total": 230}, {"year": 1990, "country": "HUN", "total": 162}, {"year": 1990, "country": "IRN", "total": 122}, {"year": 1990, "country": "KOR", "total": 79}, {"year": 1990, "country": "ROU", "total": 171}, {"year": 1990, "country": "USA", "total": 174}, {"year": 1990, "country": "VNM", "total": 104}, {"year": 1991, "country": "BGR", "total": 192}, {"year": 1991, "country": "CHN", "total": 231}, {"year": 1991, "country": "HUN", "total": 209}, {"year": 1991, "country": "IRN", "total": 191}, {"year": 1991, "country": "KOR", "total": 151}, {"year": 1991, "country": "ROU", "total": 225}, {"year": 1991, "country": "USA", "total": 212}, {"year": 1991, "country": "VNM", "total": 191}, {"year": 1992, "country": "BGR", "total": 127}, {"year": 1992, "country": "CHN", "total": 240}, {"year": 1992, "country": "HUN", "total": 142}, {"year": 1992, "country": "IRN", "total": 133}, {"year": 1992, "country": "KOR", "total": 122}, {"year": 1992, "country": "ROU", "total": 177}, {"year": 1992, "country": "RUS", "total": 158}, {"year": 1992, "country": "TWN", "total": 124}, {"year": 1992, "country": "USA", "total": 181}, {"year": 1992, "country": "VNM", "total": 139}, {"year": 1993, "country": "BGR", "total": 178}, {"year": 1993, "country": "CHN", "total": 215}, {"year": 1993, "country": "HUN", "total": 143}, {"year": 1993, "country": "IRN", "total": 153}, {"year": 1993, "country": "KOR", "total": 116}, {"year": 1993, "country": "ROU", "total": 128}, {"year": 1993, "country": "RUS", "total": 177}, {"year": 1993, "country": "TWN", "total": 162}, {"year": 1993, "country": "USA", "total": 151}, {"year": 1993, "country": "VNM", "total": 138}, {"year": 1994, "country": "BGR", "total": 223}, {"year": 1994, "country": "CHN", "total": 229}, {"year": 1994, "country": "HUN", "total": 221}, {"year": 1994, "country": "IRN", "total": 203}, {"year": 1994, "country": "KOR", "total": 170}, {"year": 1994, "country": "ROU", "total": 198}, {"year": 1994, "country": "RUS", "total": 224}, {"year": 1994, "country": "TWN", "total": 170}, {"year": 1994, "country": "USA", "total": 252}, {"year": 1994, "country": "VNM", "total": 207}, {"year": 1995, "country": "BGR", "total": 207}, {"year": 1995, "country": "CHN", "total": 236}, {"year": 1995, "country": "HUN", "total": 210}, {"year": 1995, "country": "IRN", "total": 202}, {"year": 1995, "country": "KOR", "total": 203}, {"year": 1995, "country": "ROU", "total": 230}, {"year": 1995, "country": "RUS", "total": 227}, {"year": 1995, "country": "TWN", "total": 176}, {"year": 1995, "country": "USA", "total": 178}, {"year": 1995, "country": "VNM", "total": 220}, {"year": 1996, "country": "BGR", "total": 136}, {"year": 1996, "country": "CHN", "total": 160}, {"year": 1996, "country": "HUN", "total": 167}, {"year": 1996, "country": "IRN", "total": 143}, {"year": 1996, "country": "KOR", "total": 151}, {"year": 1996, "country": "ROU", "total": 187}, {"year": 1996, "country": "RUS", "total": 162}, {"year": 1996, "country": "TWN", "total": 100}, {"year": 1996, "country": "USA", "total": 185}, {"year": 1996, "country": "VNM", "total": 155}, {"year": 1997, "country": "BGR", "total": 191}, {"year": 1997, "country": "CHN", "total": 223}, {"year": 1997, "country": "HUN", "total": 219}, {"year": 1997, "country": "IRN", "total": 217}, {"year": 1997, "country": "KOR", "total": 164}, {"year": 1997, "country": "ROU", "total": 191}, {"year": 1997, "country": "RUS", "total": 202}, {"year": 1997, "country": "TWN", "total": 148}, {"year": 1997, "country": "USA", "total": 202}, {"year": 1997, "country": "VNM", "total": 183}, {"year": 1998, "country": "BGR", "total": 195}, {"year": 1998, "country": "HUN", "total": 186}, {"year": 1998, "country": "IRN", "total": 211}, {"year": 1998, "country": "KOR", "total": 154}, {"year": 1998, "country": "ROU", "total": 155}, {"year": 1998, "country": "RUS", "total": 175}, {"year": 1998, "country": "TWN", "total": 184}, {"year": 1998, "country": "USA", "total": 186}, {"year": 1998, "country": "VNM", "total": 158}, {"year": 1999, "country": "BGR", "total": 170}, {"year": 1999, "country": "CHN", "total": 182}, {"year": 1999, "country": "HUN", "total": 147}, {"year": 1999, "country": "IRN", "total": 159}, {"year": 1999, "country": "KOR", "total": 164}, {"year": 1999, "country": "ROU", "total": 173}, {"year": 1999, "country": "RUS", "total": 182}, {"year": 1999, "country": "TWN", "total": 153}, {"year": 1999, "country": "USA", "total": 150}, {"year": 1999, "country": "VNM", "total": 177}, {"year": 2000, "country": "BGR", "total": 169}, {"year": 2000, "country": "CHN", "total": 218}, {"year": 2000, "country": "HUN", "total": 156}, {"year": 2000, "country": "IRN", "total": 155}, {"year": 2000, "country": "KOR", "total": 172}, {"year": 2000, "country": "ROU", "total": 139}, {"year": 2000, "country": "RUS", "total": 215}, {"year": 2000, "country": "TWN", "total": 164}, {"year": 2000, "country": "USA", "total": 184}, {"year": 2000, "country": "VNM", "total": 169}, {"year": 2001, "country": "BGR", "total": 185}, {"year": 2001, "country": "CHN", "total": 225}, {"year": 2001, "country": "HUN", "total": 104}, {"year": 2001, "country": "IRN", "total": 111}, {"year": 2001, "country": "KOR", "total": 185}, {"year": 2001, "country": "ROU", "total": 129}, {"year": 2001, "country": "RUS", "total": 196}, {"year": 2001, "country": "TWN", "total": 141}, {"year": 2001, "country": "USA", "total": 196}, {"year": 2001, "country": "VNM", "total": 139}, {"year": 2002, "country": "BGR", "total": 167}, {"year": 2002, "country": "CHN", "total": 212}, {"year": 2002, "country": "HUN", "total": 142}, {"year": 2002, "country": "IRN", "total": 143}, {"year": 2002, "country": "KOR", "total": 163}, {"year": 2002, "country": "ROU", "total": 157}, {"year": 2002, "country": "RUS", "total": 204}, {"year": 2002, "country": "TWN", "total": 161}, {"year": 2002, "country": "USA", "total": 171}, {"year": 2002, "country": "VNM", "total": 166}, {"year": 2003, "country": "BGR", "total": 227}, {"year": 2003, "country": "CHN", "total": 211}, {"year": 2003, "country": "HUN", "total": 128}, {"year": 2003, "country": "IRN", "total": 112}, {"year": 2003, "country": "KOR", "total": 157}, {"year": 2003, "country": "ROU", "total": 143}, {"year": 2003, "country": "RUS", "total": 167}, {"year": 2003, "country": "TWN", "total": 114}, {"year": 2003, "country": "USA", "total": 188}, {"year": 2003, "country": "VNM", "total": 172}, {"year": 2004, "country": "BGR", "total": 194}, {"year": 2004, "country": "CHN", "total": 220}, {"year": 2004, "country": "HUN", "total": 187}, {"year": 2004, "country": "IRN", "total": 178}, {"year": 2004, "country": "KOR", "total": 166}, {"year": 2004, "country": "ROU", "total": 176}, {"year": 2004, "country": "RUS", "total": 205}, {"year": 2004, "country": "TWN", "total": 190}, {"year": 2004, "country": "USA", "total": 212}, {"year": 2004, "country": "VNM", "total": 196}, {"year": 2005, "country": "BGR", "total": 173}, {"year": 2005, "country": "CHN", "total": 235}, {"year": 2005, "country": "HUN", "total": 181}, {"year": 2005, "country": "IRN", "total": 201}, {"year": 2005, "country": "KOR", "total": 200}, {"year": 2005, "country": "ROU", "total": 191}, {"year": 2005, "country": "RUS", "total": 212}, {"year": 2005, "country": "TWN", "total": 190}, {"year": 2005, "country": "USA", "total": 213}, {"year": 2005, "country": "VNM", "total": 143}, {"year": 2006, "country": "BGR", "total": 116}, {"year": 2006, "country": "CHN", "total": 214}, {"year": 2006, "country": "HUN", "total": 122}, {"year": 2006, "country": "IRN", "total": 145}, {"year": 2006, "country": "KOR", "total": 170}, {"year": 2006, "country": "ROU", "total": 152}, {"year": 2006, "country": "RUS", "total": 174}, {"year": 2006, "country": "TWN", "total": 136}, {"year": 2006, "country": "USA", "total": 154}, {"year": 2006, "country": "VNM", "total": 131}, {"year": 2007, "country": "BGR", "total": 149}, {"year": 2007, "country": "CHN", "total": 181}, {"year": 2007, "country": "HUN", "total": 129}, {"year": 2007, "country": "IRN", "total": 143}, {"year": 2007, "country": "KOR", "total": 168}, {"year": 2007, "country": "ROU", "total": 146}, {"year": 2007, "country": "RUS", "total": 184}, {"year": 2007, "country": "TWN", "total": 149}, {"year": 2007, "country": "USA", "total": 155}, {"year": 2007, "country": "VNM", "total": 168}, {"year": 2008, "country": "BGR", "total": 154}, {"year": 2008, "country": "CHN", "total": 217}, {"year": 2008, "country": "HUN", "total": 165}, {"year": 2008, "country": "IRN", "total": 181}, {"year": 2008, "country": "KOR", "total": 188}, {"year": 2008, "country": "ROU", "total": 141}, {"year": 2008, "country": "RUS", "total": 199}, {"year": 2008, "country": "TWN", "total": 168}, {"year": 2008, "country": "USA", "total": 190}, {"year": 2008, "country": "VNM", "total": 159}, {"year": 2009, "country": "BGR", "total": 157}, {"year": 2009, "country": "CHN", "total": 221}, {"year": 2009, "country": "HUN", "total": 157}, {"year": 2009, "country": "IRN", "total": 161}, {"year": 2009, "country": "KOR", "total": 188}, {"year": 2009, "country": "ROU", "total": 163}, {"year": 2009, "country": "RUS", "total": 203}, {"year": 2009, "country": "TWN", "total": 165}, {"year": 2009, "country": "USA", "total": 182}, {"year": 2009, "country": "VNM", "total": 161}, {"year": 2010, "country": "BGR", "total": 118}, {"year": 2010, "country": "CHN", "total": 197}, {"year": 2010, "country": "HUN", "total": 129}, {"year": 2010, "country": "IRN", "total": 127}, {"year": 2010, "country": "KOR", "total": 156}, {"year": 2010, "country": "ROU", "total": 127}, {"year": 2010, "country": "RUS", "total": 169}, {"year": 2010, "country": "TWN", "total": 123}, {"year": 2010, "country": "USA", "total": 168}, {"year": 2010, "country": "VNM", "total": 133}, {"year": 2011, "country": "BGR", "total": 121}, {"year": 2011, "country": "CHN", "total": 189}, {"year": 2011, "country": "HUN", "total": 116}, {"year": 2011, "country": "IRN", "total": 151}, {"year": 2011, "country": "KOR", "total": 144}, {"year": 2011, "country": "ROU", "total": 154}, {"year": 2011, "country": "RUS", "total": 161}, {"year": 2011, "country": "TWN", "total": 154}, {"year": 2011, "country": "USA", "total": 184}, {"year": 2011, "country": "VNM", "total": 113}, {"year": 2012, "country": "BGR", "total": 116}, {"year": 2012, "country": "CHN", "total": 195}, {"year": 2012, "country": "HUN", "total": 93}, {"year": 2012, "country": "IRN", "total": 151}, {"year": 2012, "country": "KOR", "total": 209}, {"year": 2012, "country": "ROU", "total": 144}, {"year": 2012, "country": "RUS", "total": 177}, {"year": 2012, "country": "TWN", "total": 127}, {"year": 2012, "country": "USA", "total": 194}, {"year": 2012, "country": "VNM", "total": 148}, {"year": 2013, "country": "BGR", "total": 101}, {"year": 2013, "country": "CHN", "total": 208}, {"year": 2013, "country": "HUN", "total": 134}, {"year": 2013, "country": "IRN", "total": 168}, {"year": 2013, "country": "KOR", "total": 204}, {"year": 2013, "country": "ROU", "total": 134}, {"year": 2013, "country": "RUS", "total": 187}, {"year": 2013, "country": "TWN", "total": 176}, {"year": 2013, "country": "USA", "total": 190}, {"year": 2013, "country": "VNM", "total": 180}, {"year": 2014, "country": "BGR", "total": 120}, {"year": 2014, "country": "CHN", "total": 201}, {"year": 2014, "country": "HUN", "total": 153}, {"year": 2014, "country": "IRN", "total": 131}, {"year": 2014, "country": "KOR", "total": 172}, {"year": 2014, "country": "ROU", "total": 156}, {"year": 2014, "country": "RUS", "total": 191}, {"year": 2014, "country": "TWN", "total": 192}, {"year": 2014, "country": "USA", "total": 193}, {"year": 2014, "country": "VNM", "total": 157}, {"year": 2015, "country": "BGR", "total": 100}, {"year": 2015, "country": "CHN", "total": 181}, {"year": 2015, "country": "HUN", "total": 113}, {"year": 2015, "country": "IRN", "total": 145}, {"year": 2015, "country": "KOR", "total": 161}, {"year": 2015, "country": "ROU", "total": 132}, {"year": 2015, "country": "RUS", "total": 141}, {"year": 2015, "country": "TWN", "total": 115}, {"year": 2015, "country": "USA", "total": 185}, {"year": 2015, "country": "VNM", "total": 151}, {"year": 2016, "country": "BGR", "total": 132}, {"year": 2016, "country": "CHN", "total": 204}, {"year": 2016, "country": "HUN", "total": 145}, {"year": 2016, "country": "IRN", "total": 125}, {"year": 2016, "country": "KOR", "total": 207}, {"year": 2016, "country": "ROU", "total": 130}, {"year": 2016, "country": "RUS", "total": 165}, {"year": 2016, "country": "TWN", "total": 175}, {"year": 2016, "country": "USA", "total": 214}, {"year": 2016, "country": "VNM", "total": 151}, {"year": 2017, "country": "BGR", "total": 116}, {"year": 2017, "country": "CHN", "total": 159}, {"year": 2017, "country": "HUN", "total": 115}, {"year": 2017, "country": "IRN", "total": 142}, {"year": 2017, "country": "KOR", "total": 170}, {"year": 2017, "country": "ROU", "total": 115}, {"year": 2017, "country": "RUS", "total": 128}, {"year": 2017, "country": "TWN", "total": 130}, {"year": 2017, "country": "USA", "total": 148}, {"year": 2017, "country": "VNM", "total": 155}]}}, {"mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><span class="c1"># Chart 6: Multi Series Line Chart - adjusting axis with clamp</span>
    <span class="c1"># (v2 chart with Top 10 countries in 2017)</span>


<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">country_chart10_2017</span><span class="p">,</span>
          <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Top Ten Countries from the 2017 IMO&quot;</span>
         <span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span>
          <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">),</span>
          <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span>
              <span class="n">domain</span><span class="o">=</span><span class="p">(</span><span class="mi">1986</span><span class="p">,</span><span class="mi">2020</span><span class="p">),</span>
              <span class="n">clamp</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">)),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span>
          <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Team score&#39;</span><span class="p">),</span>
          <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span>
              <span class="n">domain</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">300</span><span class="p">),</span>
              <span class="n">clamp</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">)),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_title</span><span class="p">(</span>
    <span class="n">fontSize</span><span class="o">=</span><span class="mi">25</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_axis</span><span class="p">(</span>
    <span class="n">labelFontSize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
    <span class="n">titleFontSize</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_legend</span><span class="p">(</span>
    <span class="n">labelFontSize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
    <span class="n">titleFontSize</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">()</span>

<span class="c1"># Adjusting axis with clamp - code source: https://altair-viz.github.io/user_guide/customization.html</span>
<span class="c1"># Configure title, axis, and legend source code: https://altair-viz.github.io/user_guide/configuration.html#</span>
<span class="c1"># Axis label - source code: https://altair-viz.github.io/user_guide/customization.html#adjusting-axis-labels</span>
<span class="c1"># Data source: https://www.kaggle.com/luckyt/imo-scores/data</span>
</pre></div>


<div id="altair-viz-6"></div>

<script type="text/javascript">
  (function(spec, embedOpt){
    const outputDiv = document.getElementById("altair-viz-6");
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.0.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}, "axis": {"labelFontSize": 13, "titleFontSize": 14}, "legend": {"labelFontSize": 13, "titleFontSize": 14}, "title": {"fontSize": 25}}, "data": {"name": "data-fbe454cd071470d38240ea1d65bab85d"}, "mark": "line", "encoding": {"color": {"type": "nominal", "field": "country"}, "x": {"type": "quantitative", "axis": {"title": "Year"}, "field": "year", "scale": {"clamp": true, "domain": [1986, 2020]}}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total", "scale": {"clamp": true, "domain": [0, 300]}}}, "height": 500, "selection": {"selector004": {"type": "interval", "bind": "scales", "encodings": ["x", "y"]}}, "title": "Top Ten Countries from the 2017 IMO", "width": 800, "$schema": "https://vega.github.io/schema/vega-lite/v4.0.0.json", "datasets": {"data-fbe454cd071470d38240ea1d65bab85d": [{"year": 1984, "country": "UNK", "total": 168}, {"year": 1984, "country": "USA", "total": 195}, {"year": 1984, "country": "VNM", "total": 162}, {"year": 1985, "country": "CHN", "total": 26}, {"year": 1985, "country": "IRN", "total": 28}, {"year": 1985, "country": "UNK", "total": 121}, {"year": 1985, "country": "USA", "total": 180}, {"year": 1985, "country": "VNM", "total": 144}, {"year": 1986, "country": "CHN", "total": 177}, {"year": 1986, "country": "UNK", "total": 141}, {"year": 1986, "country": "USA", "total": 203}, {"year": 1986, "country": "VNM", "total": 146}, {"year": 1987, "country": "CHN", "total": 200}, {"year": 1987, "country": "IRN", "total": 70}, {"year": 1987, "country": "UNK", "total": 182}, {"year": 1987, "country": "USA", "total": 220}, {"year": 1987, "country": "VNM", "total": 172}, {"year": 1988, "country": "CHN", "total": 201}, {"year": 1988, "country": "IRN", "total": 86}, {"year": 1988, "country": "KOR", "total": 79}, {"year": 1988, "country": "SGP", "total": 96}, {"year": 1988, "country": "UNK", "total": 121}, {"year": 1988, "country": "USA", "total": 153}, {"year": 1988, "country": "VNM", "total": 166}, {"year": 1989, "country": "CHN", "total": 237}, {"year": 1989, "country": "IRN", "total": 147}, {"year": 1989, "country": "KOR", "total": 97}, {"year": 1989, "country": "SGP", "total": 143}, {"year": 1989, "country": "THA", "total": 54}, {"year": 1989, "country": "UNK", "total": 122}, {"year": 1989, "country": "USA", "total": 207}, {"year": 1989, "country": "VNM", "total": 183}, {"year": 1990, "country": "CHN", "total": 230}, {"year": 1990, "country": "IRN", "total": 122}, {"year": 1990, "country": "JPN", "total": 107}, {"year": 1990, "country": "KOR", "total": 79}, {"year": 1990, "country": "SGP", "total": 93}, {"year": 1990, "country": "THA", "total": 75}, {"year": 1990, "country": "UNK", "total": 141}, {"year": 1990, "country": "USA", "total": 174}, {"year": 1990, "country": "VNM", "total": 104}, {"year": 1991, "country": "CHN", "total": 231}, {"year": 1991, "country": "IRN", "total": 191}, {"year": 1991, "country": "JPN", "total": 180}, {"year": 1991, "country": "KOR", "total": 151}, {"year": 1991, "country": "SGP", "total": 94}, {"year": 1991, "country": "THA", "total": 103}, {"year": 1991, "country": "UNK", "total": 142}, {"year": 1991, "country": "USA", "total": 212}, {"year": 1991, "country": "VNM", "total": 191}, {"year": 1992, "country": "CHN", "total": 240}, {"year": 1992, "country": "IRN", "total": 133}, {"year": 1992, "country": "JPN", "total": 142}, {"year": 1992, "country": "KOR", "total": 122}, {"year": 1992, "country": "SGP", "total": 89}, {"year": 1992, "country": "THA", "total": 50}, {"year": 1992, "country": "TWN", "total": 124}, {"year": 1992, "country": "UNK", "total": 168}, {"year": 1992, "country": "USA", "total": 181}, {"year": 1992, "country": "VNM", "total": 139}, {"year": 1993, "country": "CHN", "total": 215}, {"year": 1993, "country": "IRN", "total": 153}, {"year": 1993, "country": "JPN", "total": 98}, {"year": 1993, "country": "KOR", "total": 116}, {"year": 1993, "country": "SGP", "total": 75}, {"year": 1993, "country": "THA", "total": 47}, {"year": 1993, "country": "TWN", "total": 162}, {"year": 1993, "country": "UNK", "total": 118}, {"year": 1993, "country": "USA", "total": 151}, {"year": 1993, "country": "VNM", "total": 138}, {"year": 1994, "country": "CHN", "total": 229}, {"year": 1994, "country": "IRN", "total": 203}, {"year": 1994, "country": "JPN", "total": 180}, {"year": 1994, "country": "KOR", "total": 170}, {"year": 1994, "country": "SGP", "total": 116}, {"year": 1994, "country": "THA", "total": 106}, {"year": 1994, "country": "TWN", "total": 170}, {"year": 1994, "country": "UNK", "total": 206}, {"year": 1994, "country": "USA", "total": 252}, {"year": 1994, "country": "VNM", "total": 207}, {"year": 1995, "country": "CHN", "total": 236}, {"year": 1995, "country": "IRN", "total": 202}, {"year": 1995, "country": "JPN", "total": 183}, {"year": 1995, "country": "KOR", "total": 203}, {"year": 1995, "country": "SGP", "total": 131}, {"year": 1995, "country": "THA", "total": 107}, {"year": 1995, "country": "TWN", "total": 176}, {"year": 1995, "country": "UNK", "total": 180}, {"year": 1995, "country": "USA", "total": 178}, {"year": 1995, "country": "VNM", "total": 220}, {"year": 1996, "country": "CHN", "total": 160}, {"year": 1996, "country": "IRN", "total": 143}, {"year": 1996, "country": "JPN", "total": 136}, {"year": 1996, "country": "KOR", "total": 151}, {"year": 1996, "country": "SGP", "total": 86}, {"year": 1996, "country": "THA", "total": 47}, {"year": 1996, "country": "TWN", "total": 100}, {"year": 1996, "country": "UNK", "total": 161}, {"year": 1996, "country": "USA", "total": 185}, {"year": 1996, "country": "VNM", "total": 155}, {"year": 1997, "country": "CHN", "total": 223}, {"year": 1997, "country": "IRN", "total": 217}, {"year": 1997, "country": "JPN", "total": 163}, {"year": 1997, "country": "KOR", "total": 164}, {"year": 1997, "country": "SGP", "total": 88}, {"year": 1997, "country": "THA", "total": 66}, {"year": 1997, "country": "TWN", "total": 148}, {"year": 1997, "country": "UNK", "total": 144}, {"year": 1997, "country": "USA", "total": 202}, {"year": 1997, "country": "VNM", "total": 183}, {"year": 1998, "country": "IRN", "total": 211}, {"year": 1998, "country": "JPN", "total": 139}, {"year": 1998, "country": "KOR", "total": 154}, {"year": 1998, "country": "SGP", "total": 110}, {"year": 1998, "country": "THA", "total": 65}, {"year": 1998, "country": "TWN", "total": 184}, {"year": 1998, "country": "UNK", "total": 122}, {"year": 1998, "country": "USA", "total": 186}, {"year": 1998, "country": "VNM", "total": 158}, {"year": 1999, "country": "CHN", "total": 182}, {"year": 1999, "country": "IRN", "total": 159}, {"year": 1999, "country": "JPN", "total": 135}, {"year": 1999, "country": "KOR", "total": 164}, {"year": 1999, "country": "SGP", "total": 71}, {"year": 1999, "country": "THA", "total": 57}, {"year": 1999, "country": "TWN", "total": 153}, {"year": 1999, "country": "UNK", "total": 100}, {"year": 1999, "country": "USA", "total": 150}, {"year": 1999, "country": "VNM", "total": 177}, {"year": 2000, "country": "CHN", "total": 218}, {"year": 2000, "country": "IRN", "total": 155}, {"year": 2000, "country": "JPN", "total": 125}, {"year": 2000, "country": "KOR", "total": 172}, {"year": 2000, "country": "SGP", "total": 71}, {"year": 2000, "country": "THA", "total": 78}, {"year": 2000, "country": "TWN", "total": 164}, {"year": 2000, "country": "UNK", "total": 96}, {"year": 2000, "country": "USA", "total": 184}, {"year": 2000, "country": "VNM", "total": 169}, {"year": 2001, "country": "CHN", "total": 225}, {"year": 2001, "country": "IRN", "total": 111}, {"year": 2001, "country": "JPN", "total": 134}, {"year": 2001, "country": "KOR", "total": 185}, {"year": 2001, "country": "SGP", "total": 87}, {"year": 2001, "country": "THA", "total": 103}, {"year": 2001, "country": "TWN", "total": 141}, {"year": 2001, "country": "UNK", "total": 79}, {"year": 2001, "country": "USA", "total": 196}, {"year": 2001, "country": "VNM", "total": 139}, {"year": 2002, "country": "CHN", "total": 212}, {"year": 2002, "country": "IRN", "total": 143}, {"year": 2002, "country": "JPN", "total": 133}, {"year": 2002, "country": "KOR", "total": 163}, {"year": 2002, "country": "SGP", "total": 112}, {"year": 2002, "country": "THA", "total": 123}, {"year": 2002, "country": "TWN", "total": 161}, {"year": 2002, "country": "UNK", "total": 116}, {"year": 2002, "country": "USA", "total": 171}, {"year": 2002, "country": "VNM", "total": 166}, {"year": 2003, "country": "CHN", "total": 211}, {"year": 2003, "country": "IRN", "total": 112}, {"year": 2003, "country": "JPN", "total": 131}, {"year": 2003, "country": "KOR", "total": 157}, {"year": 2003, "country": "SGP", "total": 71}, {"year": 2003, "country": "THA", "total": 111}, {"year": 2003, "country": "TWN", "total": 114}, {"year": 2003, "country": "UNK", "total": 128}, {"year": 2003, "country": "USA", "total": 188}, {"year": 2003, "country": "VNM", "total": 172}, {"year": 2004, "country": "CHN", "total": 220}, {"year": 2004, "country": "IRN", "total": 178}, {"year": 2004, "country": "JPN", "total": 182}, {"year": 2004, "country": "KOR", "total": 166}, {"year": 2004, "country": "SGP", "total": 139}, {"year": 2004, "country": "THA", "total": 99}, {"year": 2004, "country": "TWN", "total": 190}, {"year": 2004, "country": "UNK", "total": 134}, {"year": 2004, "country": "USA", "total": 212}, {"year": 2004, "country": "VNM", "total": 196}, {"year": 2005, "country": "CHN", "total": 235}, {"year": 2005, "country": "IRN", "total": 201}, {"year": 2005, "country": "JPN", "total": 188}, {"year": 2005, "country": "KOR", "total": 200}, {"year": 2005, "country": "SGP", "total": 145}, {"year": 2005, "country": "THA", "total": 128}, {"year": 2005, "country": "TWN", "total": 190}, {"year": 2005, "country": "UNK", "total": 159}, {"year": 2005, "country": "USA", "total": 213}, {"year": 2005, "country": "VNM", "total": 143}, {"year": 2006, "country": "CHN", "total": 214}, {"year": 2006, "country": "IRN", "total": 145}, {"year": 2006, "country": "JPN", "total": 146}, {"year": 2006, "country": "KOR", "total": 170}, {"year": 2006, "country": "SGP", "total": 100}, {"year": 2006, "country": "THA", "total": 123}, {"year": 2006, "country": "TWN", "total": 136}, {"year": 2006, "country": "UNK", "total": 117}, {"year": 2006, "country": "USA", "total": 154}, {"year": 2006, "country": "VNM", "total": 131}, {"year": 2007, "country": "CHN", "total": 181}, {"year": 2007, "country": "IRN", "total": 143}, {"year": 2007, "country": "JPN", "total": 154}, {"year": 2007, "country": "KOR", "total": 168}, {"year": 2007, "country": "SGP", "total": 87}, {"year": 2007, "country": "THA", "total": 133}, {"year": 2007, "country": "TWN", "total": 149}, {"year": 2007, "country": "UNK", "total": 95}, {"year": 2007, "country": "USA", "total": 155}, {"year": 2007, "country": "VNM", "total": 168}, {"year": 2008, "country": "CHN", "total": 217}, {"year": 2008, "country": "IRN", "total": 181}, {"year": 2008, "country": "JPN", "total": 163}, {"year": 2008, "country": "KOR", "total": 188}, {"year": 2008, "country": "SGP", "total": 98}, {"year": 2008, "country": "THA", "total": 175}, {"year": 2008, "country": "TWN", "total": 168}, {"year": 2008, "country": "UNK", "total": 133}, {"year": 2008, "country": "USA", "total": 190}, {"year": 2008, "country": "VNM", "total": 159}, {"year": 2009, "country": "CHN", "total": 221}, {"year": 2009, "country": "IRN", "total": 161}, {"year": 2009, "country": "JPN", "total": 212}, {"year": 2009, "country": "KOR", "total": 188}, {"year": 2009, "country": "SGP", "total": 116}, {"year": 2009, "country": "THA", "total": 181}, {"year": 2009, "country": "TWN", "total": 165}, {"year": 2009, "country": "UNK", "total": 157}, {"year": 2009, "country": "USA", "total": 182}, {"year": 2009, "country": "VNM", "total": 161}, {"year": 2010, "country": "CHN", "total": 197}, {"year": 2010, "country": "IRN", "total": 127}, {"year": 2010, "country": "JPN", "total": 141}, {"year": 2010, "country": "KOR", "total": 156}, {"year": 2010, "country": "SGP", "total": 117}, {"year": 2010, "country": "THA", "total": 148}, {"year": 2010, "country": "TWN", "total": 123}, {"year": 2010, "country": "UNK", "total": 114}, {"year": 2010, "country": "USA", "total": 168}, {"year": 2010, "country": "VNM", "total": 133}, {"year": 2011, "country": "CHN", "total": 189}, {"year": 2011, "country": "IRN", "total": 151}, {"year": 2011, "country": "JPN", "total": 147}, {"year": 2011, "country": "KOR", "total": 144}, {"year": 2011, "country": "SGP", "total": 179}, {"year": 2011, "country": "THA", "total": 160}, {"year": 2011, "country": "TWN", "total": 154}, {"year": 2011, "country": "UNK", "total": 132}, {"year": 2011, "country": "USA", "total": 184}, {"year": 2011, "country": "VNM", "total": 113}, {"year": 2012, "country": "CHN", "total": 195}, {"year": 2012, "country": "IRN", "total": 151}, {"year": 2012, "country": "JPN", "total": 121}, {"year": 2012, "country": "KOR", "total": 209}, {"year": 2012, "country": "SGP", "total": 154}, {"year": 2012, "country": "THA", "total": 159}, {"year": 2012, "country": "TWN", "total": 127}, {"year": 2012, "country": "UNK", "total": 115}, {"year": 2012, "country": "USA", "total": 194}, {"year": 2012, "country": "VNM", "total": 148}, {"year": 2013, "country": "CHN", "total": 208}, {"year": 2013, "country": "IRN", "total": 168}, {"year": 2013, "country": "JPN", "total": 163}, {"year": 2013, "country": "KOR", "total": 204}, {"year": 2013, "country": "SGP", "total": 182}, {"year": 2013, "country": "THA", "total": 161}, {"year": 2013, "country": "TWN", "total": 176}, {"year": 2013, "country": "UNK", "total": 171}, {"year": 2013, "country": "USA", "total": 190}, {"year": 2013, "country": "VNM", "total": 180}, {"year": 2014, "country": "CHN", "total": 201}, {"year": 2014, "country": "IRN", "total": 131}, {"year": 2014, "country": "JPN", "total": 177}, {"year": 2014, "country": "KOR", "total": 172}, {"year": 2014, "country": "SGP", "total": 161}, {"year": 2014, "country": "THA", "total": 131}, {"year": 2014, "country": "TWN", "total": 192}, {"year": 2014, "country": "UNK", "total": 142}, {"year": 2014, "country": "USA", "total": 193}, {"year": 2014, "country": "VNM", "total": 157}, {"year": 2015, "country": "CHN", "total": 181}, {"year": 2015, "country": "IRN", "total": 145}, {"year": 2015, "country": "JPN", "total": 109}, {"year": 2015, "country": "KOR", "total": 161}, {"year": 2015, "country": "SGP", "total": 139}, {"year": 2015, "country": "THA", "total": 134}, {"year": 2015, "country": "TWN", "total": 115}, {"year": 2015, "country": "UNK", "total": 109}, {"year": 2015, "country": "USA", "total": 185}, {"year": 2015, "country": "VNM", "total": 151}, {"year": 2016, "country": "CHN", "total": 204}, {"year": 2016, "country": "IRN", "total": 125}, {"year": 2016, "country": "JPN", "total": 156}, {"year": 2016, "country": "KOR", "total": 207}, {"year": 2016, "country": "SGP", "total": 196}, {"year": 2016, "country": "THA", "total": 148}, {"year": 2016, "country": "TWN", "total": 175}, {"year": 2016, "country": "UNK", "total": 165}, {"year": 2016, "country": "USA", "total": 214}, {"year": 2016, "country": "VNM", "total": 151}, {"year": 2017, "country": "CHN", "total": 159}, {"year": 2017, "country": "IRN", "total": 142}, {"year": 2017, "country": "JPN", "total": 134}, {"year": 2017, "country": "KOR", "total": 170}, {"year": 2017, "country": "SGP", "total": 131}, {"year": 2017, "country": "THA", "total": 131}, {"year": 2017, "country": "TWN", "total": 130}, {"year": 2017, "country": "UNK", "total": 130}, {"year": 2017, "country": "USA", "total": 148}, {"year": 2017, "country": "VNM", "total": 155}]}}, {"mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><span class="c1"># Chart 7 - Multi-Line Tooltip - (v1 chart with Top 5 countries placing in top 10 from 1984-2017)</span>

<span class="c1"># Nearest point based on x-value</span>
<span class="n">nearest</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;single&#39;</span><span class="p">,</span> <span class="n">nearest</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span>
                        <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">empty</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>

<span class="c1"># Line chart</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">country_chart5</span><span class="p">,</span>
                 <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Top Five Countries by Historical Performance at the IMO from 1984-2017&quot;</span>
                <span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">)),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Team score&#39;</span><span class="p">)),</span>
    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;country:N&#39;</span>
<span class="p">)</span>

<span class="c1"># Selectors across the chart that indicate the x-value.</span>
<span class="n">selectors</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">country_chart5</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year:O&#39;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span>
    <span class="n">nearest</span>
<span class="p">)</span>

<span class="c1"># Points on line that are highlighted based on selection.</span>
<span class="n">points</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">opacity</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="n">nearest</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1"># Text labels near the points based on selection.</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">dy</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">text</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="n">nearest</span><span class="p">,</span> <span class="s1">&#39;total&#39;</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1"># Rule at selection location</span>
<span class="n">rules</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">country_chart5</span><span class="p">)</span><span class="o">.</span><span class="n">mark_rule</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year:O&#39;</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span>
    <span class="n">nearest</span>
<span class="p">)</span>

<span class="c1"># Chart the layers.</span>
<span class="n">alt</span><span class="o">.</span><span class="n">layer</span><span class="p">(</span>
    <span class="n">line</span><span class="p">,</span> <span class="n">selectors</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">rules</span><span class="p">,</span> <span class="n">text</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span>
<span class="p">)</span>

<span class="c1"># Chart code source: https://altair-viz.github.io/gallery/multiline_tooltip.html</span>
<span class="c1"># Axis label - source code: https://altair-viz.github.io/user_guide/customization.html#adjusting-axis-labels</span>
<span class="c1"># Data source: https://www.kaggle.com/luckyt/imo-scores/data</span>
</pre></div>


<div id="altair-viz-7"></div>

<script type="text/javascript">
  (function(spec, embedOpt){
    const outputDiv = document.getElementById("altair-viz-7");
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.0.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "layer": [{"mark": "line", "encoding": {"color": {"type": "nominal", "field": "country"}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "title": "Top Five Countries by Historical Performance at the IMO from 1984-2017"}, {"mark": "point", "encoding": {"opacity": {"value": 0}, "x": {"type": "ordinal", "field": "year"}}, "selection": {"selector005": {"type": "single", "nearest": true, "on": "mouseover", "fields": ["year"], "empty": "none"}}}, {"mark": "point", "encoding": {"color": {"type": "nominal", "field": "country"}, "opacity": {"condition": {"value": 1, "selection": "selector005"}, "value": 0}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "title": "Top Five Countries by Historical Performance at the IMO from 1984-2017"}, {"mark": {"type": "rule", "color": "gray"}, "encoding": {"x": {"type": "ordinal", "field": "year"}}, "transform": [{"filter": {"selection": "selector005"}}]}, {"mark": {"type": "text", "align": "left", "dx": 5, "dy": -5, "size": 15}, "encoding": {"color": {"type": "nominal", "field": "country"}, "text": {"condition": {"type": "quantitative", "field": "total", "selection": "selector005"}, "value": " "}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "title": "Top Five Countries by Historical Performance at the IMO from 1984-2017"}], "data": {"name": "data-2ba359e24e11bbf1be26a3db2b17637a"}, "height": 500, "width": 800, "$schema": "https://vega.github.io/schema/vega-lite/v4.0.0.json", "datasets": {"data-2ba359e24e11bbf1be26a3db2b17637a": [{"year": 1984, "country": "ROU", "total": 199}, {"year": 1984, "country": "USA", "total": 195}, {"year": 1984, "country": "VNM", "total": 162}, {"year": 1985, "country": "CHN", "total": 26}, {"year": 1985, "country": "ROU", "total": 201}, {"year": 1985, "country": "USA", "total": 180}, {"year": 1985, "country": "VNM", "total": 144}, {"year": 1986, "country": "CHN", "total": 177}, {"year": 1986, "country": "ROU", "total": 171}, {"year": 1986, "country": "USA", "total": 203}, {"year": 1986, "country": "VNM", "total": 146}, {"year": 1987, "country": "CHN", "total": 200}, {"year": 1987, "country": "ROU", "total": 250}, {"year": 1987, "country": "USA", "total": 220}, {"year": 1987, "country": "VNM", "total": 172}, {"year": 1988, "country": "CHN", "total": 201}, {"year": 1988, "country": "ROU", "total": 201}, {"year": 1988, "country": "USA", "total": 153}, {"year": 1988, "country": "VNM", "total": 166}, {"year": 1989, "country": "CHN", "total": 237}, {"year": 1989, "country": "ROU", "total": 223}, {"year": 1989, "country": "USA", "total": 207}, {"year": 1989, "country": "VNM", "total": 183}, {"year": 1990, "country": "CHN", "total": 230}, {"year": 1990, "country": "ROU", "total": 171}, {"year": 1990, "country": "USA", "total": 174}, {"year": 1990, "country": "VNM", "total": 104}, {"year": 1991, "country": "CHN", "total": 231}, {"year": 1991, "country": "ROU", "total": 225}, {"year": 1991, "country": "USA", "total": 212}, {"year": 1991, "country": "VNM", "total": 191}, {"year": 1992, "country": "CHN", "total": 240}, {"year": 1992, "country": "ROU", "total": 177}, {"year": 1992, "country": "RUS", "total": 158}, {"year": 1992, "country": "USA", "total": 181}, {"year": 1992, "country": "VNM", "total": 139}, {"year": 1993, "country": "CHN", "total": 215}, {"year": 1993, "country": "ROU", "total": 128}, {"year": 1993, "country": "RUS", "total": 177}, {"year": 1993, "country": "USA", "total": 151}, {"year": 1993, "country": "VNM", "total": 138}, {"year": 1994, "country": "CHN", "total": 229}, {"year": 1994, "country": "ROU", "total": 198}, {"year": 1994, "country": "RUS", "total": 224}, {"year": 1994, "country": "USA", "total": 252}, {"year": 1994, "country": "VNM", "total": 207}, {"year": 1995, "country": "CHN", "total": 236}, {"year": 1995, "country": "ROU", "total": 230}, {"year": 1995, "country": "RUS", "total": 227}, {"year": 1995, "country": "USA", "total": 178}, {"year": 1995, "country": "VNM", "total": 220}, {"year": 1996, "country": "CHN", "total": 160}, {"year": 1996, "country": "ROU", "total": 187}, {"year": 1996, "country": "RUS", "total": 162}, {"year": 1996, "country": "USA", "total": 185}, {"year": 1996, "country": "VNM", "total": 155}, {"year": 1997, "country": "CHN", "total": 223}, {"year": 1997, "country": "ROU", "total": 191}, {"year": 1997, "country": "RUS", "total": 202}, {"year": 1997, "country": "USA", "total": 202}, {"year": 1997, "country": "VNM", "total": 183}, {"year": 1998, "country": "ROU", "total": 155}, {"year": 1998, "country": "RUS", "total": 175}, {"year": 1998, "country": "USA", "total": 186}, {"year": 1998, "country": "VNM", "total": 158}, {"year": 1999, "country": "CHN", "total": 182}, {"year": 1999, "country": "ROU", "total": 173}, {"year": 1999, "country": "RUS", "total": 182}, {"year": 1999, "country": "USA", "total": 150}, {"year": 1999, "country": "VNM", "total": 177}, {"year": 2000, "country": "CHN", "total": 218}, {"year": 2000, "country": "ROU", "total": 139}, {"year": 2000, "country": "RUS", "total": 215}, {"year": 2000, "country": "USA", "total": 184}, {"year": 2000, "country": "VNM", "total": 169}, {"year": 2001, "country": "CHN", "total": 225}, {"year": 2001, "country": "ROU", "total": 129}, {"year": 2001, "country": "RUS", "total": 196}, {"year": 2001, "country": "USA", "total": 196}, {"year": 2001, "country": "VNM", "total": 139}, {"year": 2002, "country": "CHN", "total": 212}, {"year": 2002, "country": "ROU", "total": 157}, {"year": 2002, "country": "RUS", "total": 204}, {"year": 2002, "country": "USA", "total": 171}, {"year": 2002, "country": "VNM", "total": 166}, {"year": 2003, "country": "CHN", "total": 211}, {"year": 2003, "country": "ROU", "total": 143}, {"year": 2003, "country": "RUS", "total": 167}, {"year": 2003, "country": "USA", "total": 188}, {"year": 2003, "country": "VNM", "total": 172}, {"year": 2004, "country": "CHN", "total": 220}, {"year": 2004, "country": "ROU", "total": 176}, {"year": 2004, "country": "RUS", "total": 205}, {"year": 2004, "country": "USA", "total": 212}, {"year": 2004, "country": "VNM", "total": 196}, {"year": 2005, "country": "CHN", "total": 235}, {"year": 2005, "country": "ROU", "total": 191}, {"year": 2005, "country": "RUS", "total": 212}, {"year": 2005, "country": "USA", "total": 213}, {"year": 2005, "country": "VNM", "total": 143}, {"year": 2006, "country": "CHN", "total": 214}, {"year": 2006, "country": "ROU", "total": 152}, {"year": 2006, "country": "RUS", "total": 174}, {"year": 2006, "country": "USA", "total": 154}, {"year": 2006, "country": "VNM", "total": 131}, {"year": 2007, "country": "CHN", "total": 181}, {"year": 2007, "country": "ROU", "total": 146}, {"year": 2007, "country": "RUS", "total": 184}, {"year": 2007, "country": "USA", "total": 155}, {"year": 2007, "country": "VNM", "total": 168}, {"year": 2008, "country": "CHN", "total": 217}, {"year": 2008, "country": "ROU", "total": 141}, {"year": 2008, "country": "RUS", "total": 199}, {"year": 2008, "country": "USA", "total": 190}, {"year": 2008, "country": "VNM", "total": 159}, {"year": 2009, "country": "CHN", "total": 221}, {"year": 2009, "country": "ROU", "total": 163}, {"year": 2009, "country": "RUS", "total": 203}, {"year": 2009, "country": "USA", "total": 182}, {"year": 2009, "country": "VNM", "total": 161}, {"year": 2010, "country": "CHN", "total": 197}, {"year": 2010, "country": "ROU", "total": 127}, {"year": 2010, "country": "RUS", "total": 169}, {"year": 2010, "country": "USA", "total": 168}, {"year": 2010, "country": "VNM", "total": 133}, {"year": 2011, "country": "CHN", "total": 189}, {"year": 2011, "country": "ROU", "total": 154}, {"year": 2011, "country": "RUS", "total": 161}, {"year": 2011, "country": "USA", "total": 184}, {"year": 2011, "country": "VNM", "total": 113}, {"year": 2012, "country": "CHN", "total": 195}, {"year": 2012, "country": "ROU", "total": 144}, {"year": 2012, "country": "RUS", "total": 177}, {"year": 2012, "country": "USA", "total": 194}, {"year": 2012, "country": "VNM", "total": 148}, {"year": 2013, "country": "CHN", "total": 208}, {"year": 2013, "country": "ROU", "total": 134}, {"year": 2013, "country": "RUS", "total": 187}, {"year": 2013, "country": "USA", "total": 190}, {"year": 2013, "country": "VNM", "total": 180}, {"year": 2014, "country": "CHN", "total": 201}, {"year": 2014, "country": "ROU", "total": 156}, {"year": 2014, "country": "RUS", "total": 191}, {"year": 2014, "country": "USA", "total": 193}, {"year": 2014, "country": "VNM", "total": 157}, {"year": 2015, "country": "CHN", "total": 181}, {"year": 2015, "country": "ROU", "total": 132}, {"year": 2015, "country": "RUS", "total": 141}, {"year": 2015, "country": "USA", "total": 185}, {"year": 2015, "country": "VNM", "total": 151}, {"year": 2016, "country": "CHN", "total": 204}, {"year": 2016, "country": "ROU", "total": 130}, {"year": 2016, "country": "RUS", "total": 165}, {"year": 2016, "country": "USA", "total": 214}, {"year": 2016, "country": "VNM", "total": 151}, {"year": 2017, "country": "CHN", "total": 159}, {"year": 2017, "country": "ROU", "total": 115}, {"year": 2017, "country": "RUS", "total": 128}, {"year": 2017, "country": "USA", "total": 148}, {"year": 2017, "country": "VNM", "total": 155}]}}, {"mode": "vega-lite"});
</script>

<div class="highlight"><pre><span></span><span class="c1"># Chart 8 - Multi-Line Tooltip - (v2 chart with Top 5 countries in 2017)</span>

<span class="c1"># Nearest point based on x-value</span>
<span class="n">nearest</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;single&#39;</span><span class="p">,</span> <span class="n">nearest</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span>
                        <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">empty</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>

<span class="c1"># Line chart</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">country_chart5_2017</span><span class="p">,</span>
                 <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Top Five Countries from the 2017 IMO&#39;</span>
                <span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">)),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Team score&#39;</span><span class="p">)),</span>
    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;country:N&#39;</span>
<span class="p">)</span>

<span class="c1"># Selectors across the chart that indicate the x-value.</span>
<span class="n">selectors</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">country_chart5_2017</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year:O&#39;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span>
    <span class="n">nearest</span>
<span class="p">)</span>

<span class="c1"># Points on line that are highlighted based on selection.</span>
<span class="n">points</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">opacity</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="n">nearest</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1"># Text labels near the points based on selection.</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">dy</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">text</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="n">nearest</span><span class="p">,</span> <span class="s1">&#39;total&#39;</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1"># Rule at selection location.</span>
<span class="n">rules</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">country_chart5_2017</span><span class="p">)</span><span class="o">.</span><span class="n">mark_rule</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year:O&#39;</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span>
    <span class="n">nearest</span>
<span class="p">)</span>

<span class="c1"># Chart the layers.</span>
<span class="n">alt</span><span class="o">.</span><span class="n">layer</span><span class="p">(</span>
    <span class="n">line</span><span class="p">,</span> <span class="n">selectors</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">rules</span><span class="p">,</span> <span class="n">text</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span>
<span class="p">)</span>

<span class="c1"># Chart code source: https://altair-viz.github.io/gallery/multiline_tooltip.html</span>
<span class="c1"># Axis label - source code: https://altair-viz.github.io/user_guide/customization.html#adjusting-axis-labels</span>
<span class="c1"># Data source: https://www.kaggle.com/luckyt/imo-scores/data</span>
</pre></div>


<div id="altair-viz-8"></div>

<script type="text/javascript">
  (function(spec, embedOpt){
    const outputDiv = document.getElementById("altair-viz-8");
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.0.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "layer": [{"mark": "line", "encoding": {"color": {"type": "nominal", "field": "country"}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "title": "Top Five Countries from the 2017 IMO"}, {"mark": "point", "encoding": {"opacity": {"value": 0}, "x": {"type": "ordinal", "field": "year"}}, "selection": {"selector006": {"type": "single", "nearest": true, "on": "mouseover", "fields": ["year"], "empty": "none"}}}, {"mark": "point", "encoding": {"color": {"type": "nominal", "field": "country"}, "opacity": {"condition": {"value": 1, "selection": "selector006"}, "value": 0}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "title": "Top Five Countries from the 2017 IMO"}, {"mark": {"type": "rule", "color": "gray"}, "encoding": {"x": {"type": "ordinal", "field": "year"}}, "transform": [{"filter": {"selection": "selector006"}}]}, {"mark": {"type": "text", "align": "left", "dx": 5, "dy": -5, "size": 15}, "encoding": {"color": {"type": "nominal", "field": "country"}, "text": {"condition": {"type": "quantitative", "field": "total", "selection": "selector006"}, "value": " "}, "x": {"type": "ordinal", "axis": {"title": "Year"}, "field": "year"}, "y": {"type": "quantitative", "axis": {"title": "Team score"}, "field": "total"}}, "title": "Top Five Countries from the 2017 IMO"}], "data": {"name": "data-38c633b8e92b1ea570268ad8d33596d1"}, "height": 500, "width": 800, "$schema": "https://vega.github.io/schema/vega-lite/v4.0.0.json", "datasets": {"data-38c633b8e92b1ea570268ad8d33596d1": [{"year": 1984, "country": "USA", "total": 195}, {"year": 1984, "country": "VNM", "total": 162}, {"year": 1985, "country": "CHN", "total": 26}, {"year": 1985, "country": "IRN", "total": 28}, {"year": 1985, "country": "USA", "total": 180}, {"year": 1985, "country": "VNM", "total": 144}, {"year": 1986, "country": "CHN", "total": 177}, {"year": 1986, "country": "USA", "total": 203}, {"year": 1986, "country": "VNM", "total": 146}, {"year": 1987, "country": "CHN", "total": 200}, {"year": 1987, "country": "IRN", "total": 70}, {"year": 1987, "country": "USA", "total": 220}, {"year": 1987, "country": "VNM", "total": 172}, {"year": 1988, "country": "CHN", "total": 201}, {"year": 1988, "country": "IRN", "total": 86}, {"year": 1988, "country": "KOR", "total": 79}, {"year": 1988, "country": "USA", "total": 153}, {"year": 1988, "country": "VNM", "total": 166}, {"year": 1989, "country": "CHN", "total": 237}, {"year": 1989, "country": "IRN", "total": 147}, {"year": 1989, "country": "KOR", "total": 97}, {"year": 1989, "country": "USA", "total": 207}, {"year": 1989, "country": "VNM", "total": 183}, {"year": 1990, "country": "CHN", "total": 230}, {"year": 1990, "country": "IRN", "total": 122}, {"year": 1990, "country": "KOR", "total": 79}, {"year": 1990, "country": "USA", "total": 174}, {"year": 1990, "country": "VNM", "total": 104}, {"year": 1991, "country": "CHN", "total": 231}, {"year": 1991, "country": "IRN", "total": 191}, {"year": 1991, "country": "KOR", "total": 151}, {"year": 1991, "country": "USA", "total": 212}, {"year": 1991, "country": "VNM", "total": 191}, {"year": 1992, "country": "CHN", "total": 240}, {"year": 1992, "country": "IRN", "total": 133}, {"year": 1992, "country": "KOR", "total": 122}, {"year": 1992, "country": "USA", "total": 181}, {"year": 1992, "country": "VNM", "total": 139}, {"year": 1993, "country": "CHN", "total": 215}, {"year": 1993, "country": "IRN", "total": 153}, {"year": 1993, "country": "KOR", "total": 116}, {"year": 1993, "country": "USA", "total": 151}, {"year": 1993, "country": "VNM", "total": 138}, {"year": 1994, "country": "CHN", "total": 229}, {"year": 1994, "country": "IRN", "total": 203}, {"year": 1994, "country": "KOR", "total": 170}, {"year": 1994, "country": "USA", "total": 252}, {"year": 1994, "country": "VNM", "total": 207}, {"year": 1995, "country": "CHN", "total": 236}, {"year": 1995, "country": "IRN", "total": 202}, {"year": 1995, "country": "KOR", "total": 203}, {"year": 1995, "country": "USA", "total": 178}, {"year": 1995, "country": "VNM", "total": 220}, {"year": 1996, "country": "CHN", "total": 160}, {"year": 1996, "country": "IRN", "total": 143}, {"year": 1996, "country": "KOR", "total": 151}, {"year": 1996, "country": "USA", "total": 185}, {"year": 1996, "country": "VNM", "total": 155}, {"year": 1997, "country": "CHN", "total": 223}, {"year": 1997, "country": "IRN", "total": 217}, {"year": 1997, "country": "KOR", "total": 164}, {"year": 1997, "country": "USA", "total": 202}, {"year": 1997, "country": "VNM", "total": 183}, {"year": 1998, "country": "IRN", "total": 211}, {"year": 1998, "country": "KOR", "total": 154}, {"year": 1998, "country": "USA", "total": 186}, {"year": 1998, "country": "VNM", "total": 158}, {"year": 1999, "country": "CHN", "total": 182}, {"year": 1999, "country": "IRN", "total": 159}, {"year": 1999, "country": "KOR", "total": 164}, {"year": 1999, "country": "USA", "total": 150}, {"year": 1999, "country": "VNM", "total": 177}, {"year": 2000, "country": "CHN", "total": 218}, {"year": 2000, "country": "IRN", "total": 155}, {"year": 2000, "country": "KOR", "total": 172}, {"year": 2000, "country": "USA", "total": 184}, {"year": 2000, "country": "VNM", "total": 169}, {"year": 2001, "country": "CHN", "total": 225}, {"year": 2001, "country": "IRN", "total": 111}, {"year": 2001, "country": "KOR", "total": 185}, {"year": 2001, "country": "USA", "total": 196}, {"year": 2001, "country": "VNM", "total": 139}, {"year": 2002, "country": "CHN", "total": 212}, {"year": 2002, "country": "IRN", "total": 143}, {"year": 2002, "country": "KOR", "total": 163}, {"year": 2002, "country": "USA", "total": 171}, {"year": 2002, "country": "VNM", "total": 166}, {"year": 2003, "country": "CHN", "total": 211}, {"year": 2003, "country": "IRN", "total": 112}, {"year": 2003, "country": "KOR", "total": 157}, {"year": 2003, "country": "USA", "total": 188}, {"year": 2003, "country": "VNM", "total": 172}, {"year": 2004, "country": "CHN", "total": 220}, {"year": 2004, "country": "IRN", "total": 178}, {"year": 2004, "country": "KOR", "total": 166}, {"year": 2004, "country": "USA", "total": 212}, {"year": 2004, "country": "VNM", "total": 196}, {"year": 2005, "country": "CHN", "total": 235}, {"year": 2005, "country": "IRN", "total": 201}, {"year": 2005, "country": "KOR", "total": 200}, {"year": 2005, "country": "USA", "total": 213}, {"year": 2005, "country": "VNM", "total": 143}, {"year": 2006, "country": "CHN", "total": 214}, {"year": 2006, "country": "IRN", "total": 145}, {"year": 2006, "country": "KOR", "total": 170}, {"year": 2006, "country": "USA", "total": 154}, {"year": 2006, "country": "VNM", "total": 131}, {"year": 2007, "country": "CHN", "total": 181}, {"year": 2007, "country": "IRN", "total": 143}, {"year": 2007, "country": "KOR", "total": 168}, {"year": 2007, "country": "USA", "total": 155}, {"year": 2007, "country": "VNM", "total": 168}, {"year": 2008, "country": "CHN", "total": 217}, {"year": 2008, "country": "IRN", "total": 181}, {"year": 2008, "country": "KOR", "total": 188}, {"year": 2008, "country": "USA", "total": 190}, {"year": 2008, "country": "VNM", "total": 159}, {"year": 2009, "country": "CHN", "total": 221}, {"year": 2009, "country": "IRN", "total": 161}, {"year": 2009, "country": "KOR", "total": 188}, {"year": 2009, "country": "USA", "total": 182}, {"year": 2009, "country": "VNM", "total": 161}, {"year": 2010, "country": "CHN", "total": 197}, {"year": 2010, "country": "IRN", "total": 127}, {"year": 2010, "country": "KOR", "total": 156}, {"year": 2010, "country": "USA", "total": 168}, {"year": 2010, "country": "VNM", "total": 133}, {"year": 2011, "country": "CHN", "total": 189}, {"year": 2011, "country": "IRN", "total": 151}, {"year": 2011, "country": "KOR", "total": 144}, {"year": 2011, "country": "USA", "total": 184}, {"year": 2011, "country": "VNM", "total": 113}, {"year": 2012, "country": "CHN", "total": 195}, {"year": 2012, "country": "IRN", "total": 151}, {"year": 2012, "country": "KOR", "total": 209}, {"year": 2012, "country": "USA", "total": 194}, {"year": 2012, "country": "VNM", "total": 148}, {"year": 2013, "country": "CHN", "total": 208}, {"year": 2013, "country": "IRN", "total": 168}, {"year": 2013, "country": "KOR", "total": 204}, {"year": 2013, "country": "USA", "total": 190}, {"year": 2013, "country": "VNM", "total": 180}, {"year": 2014, "country": "CHN", "total": 201}, {"year": 2014, "country": "IRN", "total": 131}, {"year": 2014, "country": "KOR", "total": 172}, {"year": 2014, "country": "USA", "total": 193}, {"year": 2014, "country": "VNM", "total": 157}, {"year": 2015, "country": "CHN", "total": 181}, {"year": 2015, "country": "IRN", "total": 145}, {"year": 2015, "country": "KOR", "total": 161}, {"year": 2015, "country": "USA", "total": 185}, {"year": 2015, "country": "VNM", "total": 151}, {"year": 2016, "country": "CHN", "total": 204}, {"year": 2016, "country": "IRN", "total": 125}, {"year": 2016, "country": "KOR", "total": 207}, {"year": 2016, "country": "USA", "total": 214}, {"year": 2016, "country": "VNM", "total": 151}, {"year": 2017, "country": "CHN", "total": 159}, {"year": 2017, "country": "IRN", "total": 142}, {"year": 2017, "country": "KOR", "total": 170}, {"year": 2017, "country": "USA", "total": 148}, {"year": 2017, "country": "VNM", "total": 155}]}}, {"mode": "vega-lite"});
</script>
 </div>
</div>
 </div>
</body>
</html>